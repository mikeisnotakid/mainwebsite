(()=>{var e={669:(e,n,t)=>{e.exports=t(609)},448:(e,n,t)=>{"use strict";var o=t(867),r=t(26),i=t(372),a=t(327),c=t(97),s=t(109),l=t(985),u=t(61);e.exports=function(e){return new Promise((function(n,t){var f=e.data,d=e.headers,p=e.responseType;o.isFormData(f)&&delete d["Content-Type"];var g=new XMLHttpRequest;if(e.auth){var h=e.auth.username||"",v=e.auth.password?unescape(encodeURIComponent(e.auth.password)):"";d.Authorization="Basic "+btoa(h+":"+v)}var m=c(e.baseURL,e.url);function b(){if(g){var o="getAllResponseHeaders"in g?s(g.getAllResponseHeaders()):null,i={data:p&&"text"!==p&&"json"!==p?g.response:g.responseText,status:g.status,statusText:g.statusText,headers:o,config:e,request:g};r(n,t,i),g=null}}if(g.open(e.method.toUpperCase(),a(m,e.params,e.paramsSerializer),!0),g.timeout=e.timeout,"onloadend"in g?g.onloadend=b:g.onreadystatechange=function(){g&&4===g.readyState&&(0!==g.status||g.responseURL&&0===g.responseURL.indexOf("file:"))&&setTimeout(b)},g.onabort=function(){g&&(t(u("Request aborted",e,"ECONNABORTED",g)),g=null)},g.onerror=function(){t(u("Network Error",e,null,g)),g=null},g.ontimeout=function(){var n="timeout of "+e.timeout+"ms exceeded";e.timeoutErrorMessage&&(n=e.timeoutErrorMessage),t(u(n,e,e.transitional&&e.transitional.clarifyTimeoutError?"ETIMEDOUT":"ECONNABORTED",g)),g=null},o.isStandardBrowserEnv()){var y=(e.withCredentials||l(m))&&e.xsrfCookieName?i.read(e.xsrfCookieName):void 0;y&&(d[e.xsrfHeaderName]=y)}"setRequestHeader"in g&&o.forEach(d,(function(e,n){void 0===f&&"content-type"===n.toLowerCase()?delete d[n]:g.setRequestHeader(n,e)})),o.isUndefined(e.withCredentials)||(g.withCredentials=!!e.withCredentials),p&&"json"!==p&&(g.responseType=e.responseType),"function"==typeof e.onDownloadProgress&&g.addEventListener("progress",e.onDownloadProgress),"function"==typeof e.onUploadProgress&&g.upload&&g.upload.addEventListener("progress",e.onUploadProgress),e.cancelToken&&e.cancelToken.promise.then((function(e){g&&(g.abort(),t(e),g=null)})),f||(f=null),g.send(f)}))}},609:(e,n,t)=>{"use strict";var o=t(867),r=t(849),i=t(321),a=t(185);function c(e){var n=new i(e),t=r(i.prototype.request,n);return o.extend(t,i.prototype,n),o.extend(t,n),t}var s=c(t(655));s.Axios=i,s.create=function(e){return c(a(s.defaults,e))},s.Cancel=t(263),s.CancelToken=t(972),s.isCancel=t(502),s.all=function(e){return Promise.all(e)},s.spread=t(713),s.isAxiosError=t(268),e.exports=s,e.exports.default=s},263:e=>{"use strict";function n(e){this.message=e}n.prototype.toString=function(){return"Cancel"+(this.message?": "+this.message:"")},n.prototype.__CANCEL__=!0,e.exports=n},972:(e,n,t)=>{"use strict";var o=t(263);function r(e){if("function"!=typeof e)throw new TypeError("executor must be a function.");var n;this.promise=new Promise((function(e){n=e}));var t=this;e((function(e){t.reason||(t.reason=new o(e),n(t.reason))}))}r.prototype.throwIfRequested=function(){if(this.reason)throw this.reason},r.source=function(){var e;return{token:new r((function(n){e=n})),cancel:e}},e.exports=r},502:e=>{"use strict";e.exports=function(e){return!(!e||!e.__CANCEL__)}},321:(e,n,t)=>{"use strict";var o=t(867),r=t(327),i=t(782),a=t(572),c=t(185),s=t(875),l=s.validators;function u(e){this.defaults=e,this.interceptors={request:new i,response:new i}}u.prototype.request=function(e){"string"==typeof e?(e=arguments[1]||{}).url=arguments[0]:e=e||{},(e=c(this.defaults,e)).method?e.method=e.method.toLowerCase():this.defaults.method?e.method=this.defaults.method.toLowerCase():e.method="get";var n=e.transitional;void 0!==n&&s.assertOptions(n,{silentJSONParsing:l.transitional(l.boolean,"1.0.0"),forcedJSONParsing:l.transitional(l.boolean,"1.0.0"),clarifyTimeoutError:l.transitional(l.boolean,"1.0.0")},!1);var t=[],o=!0;this.interceptors.request.forEach((function(n){"function"==typeof n.runWhen&&!1===n.runWhen(e)||(o=o&&n.synchronous,t.unshift(n.fulfilled,n.rejected))}));var r,i=[];if(this.interceptors.response.forEach((function(e){i.push(e.fulfilled,e.rejected)})),!o){var u=[a,void 0];for(Array.prototype.unshift.apply(u,t),u=u.concat(i),r=Promise.resolve(e);u.length;)r=r.then(u.shift(),u.shift());return r}for(var f=e;t.length;){var d=t.shift(),p=t.shift();try{f=d(f)}catch(e){p(e);break}}try{r=a(f)}catch(e){return Promise.reject(e)}for(;i.length;)r=r.then(i.shift(),i.shift());return r},u.prototype.getUri=function(e){return e=c(this.defaults,e),r(e.url,e.params,e.paramsSerializer).replace(/^\?/,"")},o.forEach(["delete","get","head","options"],(function(e){u.prototype[e]=function(n,t){return this.request(c(t||{},{method:e,url:n,data:(t||{}).data}))}})),o.forEach(["post","put","patch"],(function(e){u.prototype[e]=function(n,t,o){return this.request(c(o||{},{method:e,url:n,data:t}))}})),e.exports=u},782:(e,n,t)=>{"use strict";var o=t(867);function r(){this.handlers=[]}r.prototype.use=function(e,n,t){return this.handlers.push({fulfilled:e,rejected:n,synchronous:!!t&&t.synchronous,runWhen:t?t.runWhen:null}),this.handlers.length-1},r.prototype.eject=function(e){this.handlers[e]&&(this.handlers[e]=null)},r.prototype.forEach=function(e){o.forEach(this.handlers,(function(n){null!==n&&e(n)}))},e.exports=r},97:(e,n,t)=>{"use strict";var o=t(793),r=t(303);e.exports=function(e,n){return e&&!o(n)?r(e,n):n}},61:(e,n,t)=>{"use strict";var o=t(481);e.exports=function(e,n,t,r,i){var a=new Error(e);return o(a,n,t,r,i)}},572:(e,n,t)=>{"use strict";var o=t(867),r=t(527),i=t(502),a=t(655);function c(e){e.cancelToken&&e.cancelToken.throwIfRequested()}e.exports=function(e){return c(e),e.headers=e.headers||{},e.data=r.call(e,e.data,e.headers,e.transformRequest),e.headers=o.merge(e.headers.common||{},e.headers[e.method]||{},e.headers),o.forEach(["delete","get","head","post","put","patch","common"],(function(n){delete e.headers[n]})),(e.adapter||a.adapter)(e).then((function(n){return c(e),n.data=r.call(e,n.data,n.headers,e.transformResponse),n}),(function(n){return i(n)||(c(e),n&&n.response&&(n.response.data=r.call(e,n.response.data,n.response.headers,e.transformResponse))),Promise.reject(n)}))}},481:e=>{"use strict";e.exports=function(e,n,t,o,r){return e.config=n,t&&(e.code=t),e.request=o,e.response=r,e.isAxiosError=!0,e.toJSON=function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:this.config,code:this.code}},e}},185:(e,n,t)=>{"use strict";var o=t(867);e.exports=function(e,n){n=n||{};var t={},r=["url","method","data"],i=["headers","auth","proxy","params"],a=["baseURL","transformRequest","transformResponse","paramsSerializer","timeout","timeoutMessage","withCredentials","adapter","responseType","xsrfCookieName","xsrfHeaderName","onUploadProgress","onDownloadProgress","decompress","maxContentLength","maxBodyLength","maxRedirects","transport","httpAgent","httpsAgent","cancelToken","socketPath","responseEncoding"],c=["validateStatus"];function s(e,n){return o.isPlainObject(e)&&o.isPlainObject(n)?o.merge(e,n):o.isPlainObject(n)?o.merge({},n):o.isArray(n)?n.slice():n}function l(r){o.isUndefined(n[r])?o.isUndefined(e[r])||(t[r]=s(void 0,e[r])):t[r]=s(e[r],n[r])}o.forEach(r,(function(e){o.isUndefined(n[e])||(t[e]=s(void 0,n[e]))})),o.forEach(i,l),o.forEach(a,(function(r){o.isUndefined(n[r])?o.isUndefined(e[r])||(t[r]=s(void 0,e[r])):t[r]=s(void 0,n[r])})),o.forEach(c,(function(o){o in n?t[o]=s(e[o],n[o]):o in e&&(t[o]=s(void 0,e[o]))}));var u=r.concat(i).concat(a).concat(c),f=Object.keys(e).concat(Object.keys(n)).filter((function(e){return-1===u.indexOf(e)}));return o.forEach(f,l),t}},26:(e,n,t)=>{"use strict";var o=t(61);e.exports=function(e,n,t){var r=t.config.validateStatus;t.status&&r&&!r(t.status)?n(o("Request failed with status code "+t.status,t.config,null,t.request,t)):e(t)}},527:(e,n,t)=>{"use strict";var o=t(867),r=t(655);e.exports=function(e,n,t){var i=this||r;return o.forEach(t,(function(t){e=t.call(i,e,n)})),e}},655:(e,n,t)=>{"use strict";var o=t(867),r=t(16),i=t(481),a={"Content-Type":"application/x-www-form-urlencoded"};function c(e,n){!o.isUndefined(e)&&o.isUndefined(e["Content-Type"])&&(e["Content-Type"]=n)}var s,l={transitional:{silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},adapter:(("undefined"!=typeof XMLHttpRequest||"undefined"!=typeof process&&"[object process]"===Object.prototype.toString.call(process))&&(s=t(448)),s),transformRequest:[function(e,n){return r(n,"Accept"),r(n,"Content-Type"),o.isFormData(e)||o.isArrayBuffer(e)||o.isBuffer(e)||o.isStream(e)||o.isFile(e)||o.isBlob(e)?e:o.isArrayBufferView(e)?e.buffer:o.isURLSearchParams(e)?(c(n,"application/x-www-form-urlencoded;charset=utf-8"),e.toString()):o.isObject(e)||n&&"application/json"===n["Content-Type"]?(c(n,"application/json"),function(e,n,t){if(o.isString(e))try{return(0,JSON.parse)(e),o.trim(e)}catch(e){if("SyntaxError"!==e.name)throw e}return(0,JSON.stringify)(e)}(e)):e}],transformResponse:[function(e){var n=this.transitional,t=n&&n.silentJSONParsing,r=n&&n.forcedJSONParsing,a=!t&&"json"===this.responseType;if(a||r&&o.isString(e)&&e.length)try{return JSON.parse(e)}catch(e){if(a){if("SyntaxError"===e.name)throw i(e,this,"E_JSON_PARSE");throw e}}return e}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,validateStatus:function(e){return e>=200&&e<300},headers:{common:{Accept:"application/json, text/plain, */*"}}};o.forEach(["delete","get","head"],(function(e){l.headers[e]={}})),o.forEach(["post","put","patch"],(function(e){l.headers[e]=o.merge(a)})),e.exports=l},849:e=>{"use strict";e.exports=function(e,n){return function(){for(var t=new Array(arguments.length),o=0;o<t.length;o++)t[o]=arguments[o];return e.apply(n,t)}}},327:(e,n,t)=>{"use strict";var o=t(867);function r(e){return encodeURIComponent(e).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}e.exports=function(e,n,t){if(!n)return e;var i;if(t)i=t(n);else if(o.isURLSearchParams(n))i=n.toString();else{var a=[];o.forEach(n,(function(e,n){null!=e&&(o.isArray(e)?n+="[]":e=[e],o.forEach(e,(function(e){o.isDate(e)?e=e.toISOString():o.isObject(e)&&(e=JSON.stringify(e)),a.push(r(n)+"="+r(e))})))})),i=a.join("&")}if(i){var c=e.indexOf("#");-1!==c&&(e=e.slice(0,c)),e+=(-1===e.indexOf("?")?"?":"&")+i}return e}},303:e=>{"use strict";e.exports=function(e,n){return n?e.replace(/\/+$/,"")+"/"+n.replace(/^\/+/,""):e}},372:(e,n,t)=>{"use strict";var o=t(867);e.exports=o.isStandardBrowserEnv()?{write:function(e,n,t,r,i,a){var c=[];c.push(e+"="+encodeURIComponent(n)),o.isNumber(t)&&c.push("expires="+new Date(t).toGMTString()),o.isString(r)&&c.push("path="+r),o.isString(i)&&c.push("domain="+i),!0===a&&c.push("secure"),document.cookie=c.join("; ")},read:function(e){var n=document.cookie.match(new RegExp("(^|;\\s*)("+e+")=([^;]*)"));return n?decodeURIComponent(n[3]):null},remove:function(e){this.write(e,"",Date.now()-864e5)}}:{write:function(){},read:function(){return null},remove:function(){}}},793:e=>{"use strict";e.exports=function(e){return/^([a-z][a-z\d\+\-\.]*:)?\/\//i.test(e)}},268:e=>{"use strict";e.exports=function(e){return"object"==typeof e&&!0===e.isAxiosError}},985:(e,n,t)=>{"use strict";var o=t(867);e.exports=o.isStandardBrowserEnv()?function(){var e,n=/(msie|trident)/i.test(navigator.userAgent),t=document.createElement("a");function r(e){var o=e;return n&&(t.setAttribute("href",o),o=t.href),t.setAttribute("href",o),{href:t.href,protocol:t.protocol?t.protocol.replace(/:$/,""):"",host:t.host,search:t.search?t.search.replace(/^\?/,""):"",hash:t.hash?t.hash.replace(/^#/,""):"",hostname:t.hostname,port:t.port,pathname:"/"===t.pathname.charAt(0)?t.pathname:"/"+t.pathname}}return e=r(window.location.href),function(n){var t=o.isString(n)?r(n):n;return t.protocol===e.protocol&&t.host===e.host}}():function(){return!0}},16:(e,n,t)=>{"use strict";var o=t(867);e.exports=function(e,n){o.forEach(e,(function(t,o){o!==n&&o.toUpperCase()===n.toUpperCase()&&(e[n]=t,delete e[o])}))}},109:(e,n,t)=>{"use strict";var o=t(867),r=["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"];e.exports=function(e){var n,t,i,a={};return e?(o.forEach(e.split("\n"),(function(e){if(i=e.indexOf(":"),n=o.trim(e.substr(0,i)).toLowerCase(),t=o.trim(e.substr(i+1)),n){if(a[n]&&r.indexOf(n)>=0)return;a[n]="set-cookie"===n?(a[n]?a[n]:[]).concat([t]):a[n]?a[n]+", "+t:t}})),a):a}},713:e=>{"use strict";e.exports=function(e){return function(n){return e.apply(null,n)}}},875:(e,n,t)=>{"use strict";var o=t(593),r={};["object","boolean","number","function","string","symbol"].forEach((function(e,n){r[e]=function(t){return typeof t===e||"a"+(n<1?"n ":" ")+e}}));var i={},a=o.version.split(".");function c(e,n){for(var t=n?n.split("."):a,o=e.split("."),r=0;r<3;r++){if(t[r]>o[r])return!0;if(t[r]<o[r])return!1}return!1}r.transitional=function(e,n,t){var r=n&&c(n);function a(e,n){return"[Axios v"+o.version+"] Transitional option '"+e+"'"+n+(t?". "+t:"")}return function(t,o,c){if(!1===e)throw new Error(a(o," has been removed in "+n));return r&&!i[o]&&(i[o]=!0,console.warn(a(o," has been deprecated since v"+n+" and will be removed in the near future"))),!e||e(t,o,c)}},e.exports={isOlderVersion:c,assertOptions:function(e,n,t){if("object"!=typeof e)throw new TypeError("options must be an object");for(var o=Object.keys(e),r=o.length;r-- >0;){var i=o[r],a=n[i];if(a){var c=e[i],s=void 0===c||a(c,i,e);if(!0!==s)throw new TypeError("option "+i+" must be "+s)}else if(!0!==t)throw Error("Unknown option "+i)}},validators:r}},867:(e,n,t)=>{"use strict";var o=t(849),r=Object.prototype.toString;function i(e){return"[object Array]"===r.call(e)}function a(e){return void 0===e}function c(e){return null!==e&&"object"==typeof e}function s(e){if("[object Object]"!==r.call(e))return!1;var n=Object.getPrototypeOf(e);return null===n||n===Object.prototype}function l(e){return"[object Function]"===r.call(e)}function u(e,n){if(null!=e)if("object"!=typeof e&&(e=[e]),i(e))for(var t=0,o=e.length;t<o;t++)n.call(null,e[t],t,e);else for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&n.call(null,e[r],r,e)}e.exports={isArray:i,isArrayBuffer:function(e){return"[object ArrayBuffer]"===r.call(e)},isBuffer:function(e){return null!==e&&!a(e)&&null!==e.constructor&&!a(e.constructor)&&"function"==typeof e.constructor.isBuffer&&e.constructor.isBuffer(e)},isFormData:function(e){return"undefined"!=typeof FormData&&e instanceof FormData},isArrayBufferView:function(e){return"undefined"!=typeof ArrayBuffer&&ArrayBuffer.isView?ArrayBuffer.isView(e):e&&e.buffer&&e.buffer instanceof ArrayBuffer},isString:function(e){return"string"==typeof e},isNumber:function(e){return"number"==typeof e},isObject:c,isPlainObject:s,isUndefined:a,isDate:function(e){return"[object Date]"===r.call(e)},isFile:function(e){return"[object File]"===r.call(e)},isBlob:function(e){return"[object Blob]"===r.call(e)},isFunction:l,isStream:function(e){return c(e)&&l(e.pipe)},isURLSearchParams:function(e){return"undefined"!=typeof URLSearchParams&&e instanceof URLSearchParams},isStandardBrowserEnv:function(){return("undefined"==typeof navigator||"ReactNative"!==navigator.product&&"NativeScript"!==navigator.product&&"NS"!==navigator.product)&&"undefined"!=typeof window&&"undefined"!=typeof document},forEach:u,merge:function e(){var n={};function t(t,o){s(n[o])&&s(t)?n[o]=e(n[o],t):s(t)?n[o]=e({},t):i(t)?n[o]=t.slice():n[o]=t}for(var o=0,r=arguments.length;o<r;o++)u(arguments[o],t);return n},extend:function(e,n,t){return u(n,(function(n,r){e[r]=t&&"function"==typeof n?o(n,t):n})),e},trim:function(e){return e.trim?e.trim():e.replace(/^\s+|\s+$/g,"")},stripBOM:function(e){return 65279===e.charCodeAt(0)&&(e=e.slice(1)),e}}},593:e=>{"use strict";e.exports=JSON.parse('{"name":"axios","version":"0.21.4","description":"Promise based HTTP client for the browser and node.js","main":"index.js","scripts":{"test":"grunt test","start":"node ./sandbox/server.js","build":"NODE_ENV=production grunt build","preversion":"npm test","version":"npm run build && grunt version && git add -A dist && git add CHANGELOG.md bower.json package.json","postversion":"git push && git push --tags","examples":"node ./examples/server.js","coveralls":"cat coverage/lcov.info | ./node_modules/coveralls/bin/coveralls.js","fix":"eslint --fix lib/**/*.js"},"repository":{"type":"git","url":"https://github.com/axios/axios.git"},"keywords":["xhr","http","ajax","promise","node"],"author":"Matt Zabriskie","license":"MIT","bugs":{"url":"https://github.com/axios/axios/issues"},"homepage":"https://axios-http.com","devDependencies":{"coveralls":"^3.0.0","es6-promise":"^4.2.4","grunt":"^1.3.0","grunt-banner":"^0.6.0","grunt-cli":"^1.2.0","grunt-contrib-clean":"^1.1.0","grunt-contrib-watch":"^1.0.0","grunt-eslint":"^23.0.0","grunt-karma":"^4.0.0","grunt-mocha-test":"^0.13.3","grunt-ts":"^6.0.0-beta.19","grunt-webpack":"^4.0.2","istanbul-instrumenter-loader":"^1.0.0","jasmine-core":"^2.4.1","karma":"^6.3.2","karma-chrome-launcher":"^3.1.0","karma-firefox-launcher":"^2.1.0","karma-jasmine":"^1.1.1","karma-jasmine-ajax":"^0.1.13","karma-safari-launcher":"^1.0.0","karma-sauce-launcher":"^4.3.6","karma-sinon":"^1.0.5","karma-sourcemap-loader":"^0.3.8","karma-webpack":"^4.0.2","load-grunt-tasks":"^3.5.2","minimist":"^1.2.0","mocha":"^8.2.1","sinon":"^4.5.0","terser-webpack-plugin":"^4.2.3","typescript":"^4.0.5","url-search-params":"^0.10.0","webpack":"^4.44.2","webpack-dev-server":"^3.11.0"},"browser":{"./lib/adapters/http.js":"./lib/adapters/xhr.js"},"jsdelivr":"dist/axios.min.js","unpkg":"dist/axios.min.js","typings":"./index.d.ts","dependencies":{"follow-redirects":"^1.14.0"},"bundlesize":[{"path":"./dist/axios.min.js","threshold":"5kB"}]}')}},n={};function t(o){var r=n[o];if(void 0!==r)return r.exports;var i=n[o]={exports:{}};return e[o](i,i.exports,t),i.exports}t.n=e=>{var n=e&&e.__esModule?()=>e.default:()=>e;return t.d(n,{a:n}),n},t.d=(e,n)=>{for(var o in n)t.o(n,o)&&!t.o(e,o)&&Object.defineProperty(e,o,{enumerable:!0,get:n[o]})},t.o=(e,n)=>Object.prototype.hasOwnProperty.call(e,n),(()=>{"use strict";const e=new class{#e="[-]";#n={error:"error",warn:"warn",info:"info",verbose:"verbose"};#t="info";get logLevel(){return this.#t}get logLevels(){return this.#n}setLogLevel(e){Object.hasOwn(this.#n,e)&&(this.#t=e)}initialize(e,n){this.#e=`[${e}]:`,n&&"verbose"===n&&(this.#t=this.#n.verbose)}logError(...e){console.error(this.#e,...e)}logWarn(...e){this.#t!==this.#n.warn&&this.#t!==this.#n.info&&this.#t!==this.#n.verbose||console.warn(this.#e,...e)}logInfo(...e){this.#t!==this.#n.info&&this.#t!==this.#n.verbose||console.info(this.#e,"[INFO]",...e)}logDebug(...e){this.#t===this.#n.verbose&&console.info(this.#e,"[DEBUG]",...e)}logTrace(...e){this.#t===this.#n.verbose&&console.info(this.#e,"[TRACE]",...e)}};var n=t(669),o=t.n(n);const r=n=>{try{return atob(n)}catch(t){throw t instanceof DOMException&&"InvalidCharacterError"===t.name?(e.logError(`Value "${n}" is not valid base64`),t):(e.logError(`An error occured when decoding "${n}"`),t)}},i=({name:n,value:t,days:o=90,path:r="/"})=>{if(!n||null==t||""===t)return"";const i=new Date;i.setTime(i.getTime()+24*o*60*60*1e3);const a=`${n}=${t}; expires=${i.toUTCString()}; path=${r};`;return e.logDebug(`Returning new cookie value: ${a}`),a},a=(n,t)=>{try{const o=function(n,t){var o="".concat(t,"="),r=decodeURIComponent(n);if(!r.includes(o))return e.logDebug("Decoded cookies string: ".concat(JSON.stringify(r)," does not include ").concat(t," cookie. Returning...")),"";for(var i=r.split(";"),a=0;a<i.length;a++){var c=i[a];if(c){for(;" "===c.charAt(0);)c=c.substring(1);if(0===c.indexOf(o)){var s=c.substring(o.length,c.length);return e.logDebug("Cookie ".concat(t," found. Value ").concat(s,".")),s}}}return e.logDebug("Cookie ".concat(t," found, but the value has not been found. Decoded cookie string: ").concat(JSON.stringify(r),".")),""}(n,t);return r(o)}catch(n){if(n instanceof DOMException&&"InvalidCharacterError"===n.name)return e.logInfo(`Invalid cookie "${t}" is being cleared...`),document.cookie=i({name:t,value:"none",days:0}),e.logInfo(`Cookie "${t}" has been cleared.`),"";throw n}},c=n=>{try{return btoa(n)}catch(t){throw t instanceof DOMException&&"InvalidCharacterError"===t.name?(e.logError(`The value ${n} contained a character that could not be encoded`),t):(e.logError(`An error occured when decoding "${n}"`),t)}},s=e=>"string"!=typeof e||""===e?null:`${e}_logging_level`;var l={Utiq:"Utiq",Teavaro:"Teavaro"};const u=(n,t)=>new Promise(((o,r)=>{const{CALLS_CONFIG:i,CONSTANTS:a,FC_CONF:c}=window[t]?.data?.clientConfig||{};null!=i&&i!=={}&&null!=a&&a!=={}&&null!=c&&c!=={}?(e.logInfo("Client configuration detected in data layer. Loading the detected configuration..."),e.logDebug(`Client calls configuration from data layer: ${i}`),e.logDebug(`Client constants configuration from data layer: ${a}`),e.logDebug(`Client fc configuration from data layer: ${c}`),o({CALLS_CONFIG:i,CONSTANTS:a,FC_CONF:c})):(({host:n,environment:t,successCallback:o,errorCallback:r})=>{const i=((n,t)=>{e.logDebug(`Read host: ${n}`);const o=(e=>{const n=e.split(".");return n.length>2&&("www"===n[0]||"m"===n[0])&&n.shift(),n.join("-").concat(".js")})(n);e.logDebug(`Detected config filename: ${o}`);const r=((e,n)=>{const t=e.split(".");return t.length>2&&t.shift(),`https://${n===l.Utiq?l.Utiq.toLowerCase():"fc"}.${t.join(".")}`})(n,t);return e.logDebug(`Detected config file host: ${r}`),`${r}/${o}`})(n,t),a=document.createElement("script");a.type="text/javascript",a.src=i,a.onerror=n=>{e.logError("Error occurred when trying to resolve client configuration file"),"function"==typeof r?r(n):e.logWarn("Client configuration error callback is not a function. Proceeding without a callback execution...")},a.onload=()=>{const{CALLS_CONFIG:n,CONSTANTS:r,FC_CONF:i}=window[t]?.data?.clientConfig||{};e.logDebug(`Client calls configuration from script call: ${n}`),e.logDebug(`Client constants configuration from script call: ${r}`),"function"==typeof o?o({CALLS_CONFIG:n,CONSTANTS:r,FC_CONF:i}):e.logWarn("Client configuration succes callback is not a function. Proceeding without a callback execution...")},document.head.appendChild(a)})({host:n,environment:t,successCallback:o,errorCallback:r})}));var f=function(){return f=Object.assign||function(e){for(var n,t=1,o=arguments.length;t<o;t++)for(var r in n=arguments[t])Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r]);return e},f.apply(this,arguments)};var d=function(e,n){return t=void 0,r=void 0,a=function(){var t,r,i,a;return function(e,n){var t,o,r,i,a={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return i={next:c(0),throw:c(1),return:c(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function c(c){return function(s){return function(c){if(t)throw new TypeError("Generator is already executing.");for(;i&&(i=0,c[0]&&(a=0)),a;)try{if(t=1,o&&(r=2&c[0]?o.return:c[0]?o.throw||((r=o.return)&&r.call(o),0):o.next)&&!(r=r.call(o,c[1])).done)return r;switch(o=0,r&&(c=[2&c[0],r.value]),c[0]){case 0:case 1:r=c;break;case 4:return a.label++,{value:c[1],done:!1};case 5:a.label++,o=c[1],c=[0];continue;case 7:c=a.ops.pop(),a.trys.pop();continue;default:if(!((r=(r=a.trys).length>0&&r[r.length-1])||6!==c[0]&&2!==c[0])){a=0;continue}if(3===c[0]&&(!r||c[1]>r[0]&&c[1]<r[3])){a.label=c[1];break}if(6===c[0]&&a.label<r[1]){a.label=r[1],r=c;break}if(r&&a.label<r[2]){a.label=r[2],a.ops.push(c);break}r[2]&&a.ops.pop(),a.trys.pop();continue}c=n.call(e,a)}catch(e){c=[6,e],o=0}finally{t=r=0}if(5&c[0])throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}([c,s])}}}(this,(function(c){switch(c.label){case 0:t=n.API_HOST,r=n.API_IDENT_URL,i="".concat(t).concat(r,"?s2s=").concat(2),a=function(e){return Object.keys(e).map((function(n){return"".concat(n,"=").concat(e[n])})).join("&")}(e),c.label=1;case 1:return c.trys.push([1,3,,4]),[4,o()({method:"get",url:"".concat(i,"&").concat(a),withCredentials:!0,timeout:4e3})];case 2:return[2,{data:c.sent().data,error:null}];case 3:return[2,{data:null,error:c.sent().message}];case 4:return[2]}}))},new((i=void 0)||(i=Promise))((function(e,n){function o(e){try{s(a.next(e))}catch(e){n(e)}}function c(e){try{s(a.throw(e))}catch(e){n(e)}}function s(n){var t;n.done?e(n.value):(t=n.value,t instanceof i?t:new i((function(e){e(t)}))).then(o,c)}s((a=a.apply(t,r||[])).next())}));var t,r,i,a},p=function(n,t){return o=this,r=void 0,a=function(){var o,r,i;return function(e,n){var t,o,r,i,a={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return i={next:c(0),throw:c(1),return:c(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function c(c){return function(s){return function(c){if(t)throw new TypeError("Generator is already executing.");for(;i&&(i=0,c[0]&&(a=0)),a;)try{if(t=1,o&&(r=2&c[0]?o.return:c[0]?o.throw||((r=o.return)&&r.call(o),0):o.next)&&!(r=r.call(o,c[1])).done)return r;switch(o=0,r&&(c=[2&c[0],r.value]),c[0]){case 0:case 1:r=c;break;case 4:return a.label++,{value:c[1],done:!1};case 5:a.label++,o=c[1],c=[0];continue;case 7:c=a.ops.pop(),a.trys.pop();continue;default:if(!((r=(r=a.trys).length>0&&r[r.length-1])||6!==c[0]&&2!==c[0])){a=0;continue}if(3===c[0]&&(!r||c[1]>r[0]&&c[1]<r[3])){a.label=c[1];break}if(6===c[0]&&a.label<r[1]){a.label=r[1],r=c;break}if(r&&a.label<r[2]){a.label=r[2],a.ops.push(c);break}r[2]&&a.ops.pop(),a.trys.pop();continue}c=n.call(e,a)}catch(e){c=[6,e],o=0}finally{t=r=0}if(5&c[0])throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}([c,s])}}}(this,(function(a){switch(a.label){case 0:return o=null==n?void 0:n.customerId,r=(null==n?void 0:n.customerKey)||"fc_cid",o?[4,d((i={},i[r]=o,i),t)]:[3,2];case 1:return a.sent(),sessionStorage.setItem("identCalled",JSON.stringify(!0)),[3,3];case 2:e.logDebug("Local storage customerId for ident call is not defined. Ident call was not made."),a.label=3;case 3:return[2]}}))},new((i=void 0)||(i=Promise))((function(e,n){function t(e){try{s(a.next(e))}catch(e){n(e)}}function c(e){try{s(a.throw(e))}catch(e){n(e)}}function s(n){var o;n.done?e(n.value):(o=n.value,o instanceof i?o:new i((function(e){e(o)}))).then(t,c)}s((a=a.apply(o,r||[])).next())}));var o,r,i,a},g=function(n,t){return o=this,r=void 0,a=function(){return function(e,n){var t,o,r,i,a={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return i={next:c(0),throw:c(1),return:c(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function c(c){return function(s){return function(c){if(t)throw new TypeError("Generator is already executing.");for(;i&&(i=0,c[0]&&(a=0)),a;)try{if(t=1,o&&(r=2&c[0]?o.return:c[0]?o.throw||((r=o.return)&&r.call(o),0):o.next)&&!(r=r.call(o,c[1])).done)return r;switch(o=0,r&&(c=[2&c[0],r.value]),c[0]){case 0:case 1:r=c;break;case 4:return a.label++,{value:c[1],done:!1};case 5:a.label++,o=c[1],c=[0];continue;case 7:c=a.ops.pop(),a.trys.pop();continue;default:if(!((r=(r=a.trys).length>0&&r[r.length-1])||6!==c[0]&&2!==c[0])){a=0;continue}if(3===c[0]&&(!r||c[1]>r[0]&&c[1]<r[3])){a.label=c[1];break}if(6===c[0]&&a.label<r[1]){a.label=r[1],r=c;break}if(r&&a.label<r[2]){a.label=r[2],a.ops.push(c);break}r[2]&&a.ops.pop(),a.trys.pop();continue}c=n.call(e,a)}catch(e){c=[6,e],o=0}finally{t=r=0}if(5&c[0])throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}([c,s])}}}(this,(function(o){switch(o.label){case 0:return e.logDebug("Checking conditions for ident call..."),function(n){var t=null==n?void 0:n.customerId,o=JSON.parse(sessionStorage.getItem("identCalled")),r=!document.cookie.includes("umdid=");return e.logDebug("Calls config customerId: ".concat(t)),e.logDebug("Ident call session storage value: ".concat(o)),e.logDebug("Cookie includes UMDID: ".concat(r)),t&&!o&&r}(n)?(e.logDebug("Ident call conditions matched. Invoking ident call..."),[4,p(n,t)]):[3,2];case 1:o.sent(),o.label=2;case 2:return[2]}}))},new((i=void 0)||(i=Promise))((function(e,n){function t(e){try{s(a.next(e))}catch(e){n(e)}}function c(e){try{s(a.throw(e))}catch(e){n(e)}}function s(n){var o;n.done?e(n.value):(o=n.value,o instanceof i?o:new i((function(e){e(o)}))).then(t,c)}s((a=a.apply(o,r||[])).next())}));var o,r,i,a},h=function(e){return n=void 0,t=void 0,i=function(){var n;return function(e,n){var t,o,r,i,a={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return i={next:c(0),throw:c(1),return:c(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function c(c){return function(s){return function(c){if(t)throw new TypeError("Generator is already executing.");for(;i&&(i=0,c[0]&&(a=0)),a;)try{if(t=1,o&&(r=2&c[0]?o.return:c[0]?o.throw||((r=o.return)&&r.call(o),0):o.next)&&!(r=r.call(o,c[1])).done)return r;switch(o=0,r&&(c=[2&c[0],r.value]),c[0]){case 0:case 1:r=c;break;case 4:return a.label++,{value:c[1],done:!1};case 5:a.label++,o=c[1],c=[0];continue;case 7:c=a.ops.pop(),a.trys.pop();continue;default:if(!((r=(r=a.trys).length>0&&r[r.length-1])||6!==c[0]&&2!==c[0])){a=0;continue}if(3===c[0]&&(!r||c[1]>r[0]&&c[1]<r[3])){a.label=c[1];break}if(6===c[0]&&a.label<r[1]){a.label=r[1],r=c;break}if(r&&a.label<r[2]){a.label=r[2],a.ops.push(c);break}r[2]&&a.ops.pop(),a.trys.pop();continue}c=n.call(e,a)}catch(e){c=[6,e],o=0}finally{t=r=0}if(5&c[0])throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}([c,s])}}}(this,(function(t){switch(t.label){case 0:n="".concat(e.API_IDSYNC_URL),t.label=1;case 1:return t.trys.push([1,3,,4]),[4,o()({method:"get",url:n,withCredentials:!0,timeout:4e3})];case 2:return[2,{data:t.sent().data,error:null}];case 3:return[2,{data:null,error:t.sent().message}];case 4:return[2]}}))},new((r=void 0)||(r=Promise))((function(e,o){function a(e){try{s(i.next(e))}catch(e){o(e)}}function c(e){try{s(i.throw(e))}catch(e){o(e)}}function s(n){var t;n.done?e(n.value):(t=n.value,t instanceof r?t:new r((function(e){e(t)}))).then(a,c)}s((i=i.apply(n,t||[])).next())}));var n,t,r,i},v=function(e,n){return t=this,o=void 0,i=function(){return function(e,n){var t,o,r,i,a={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return i={next:c(0),throw:c(1),return:c(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function c(c){return function(s){return function(c){if(t)throw new TypeError("Generator is already executing.");for(;i&&(i=0,c[0]&&(a=0)),a;)try{if(t=1,o&&(r=2&c[0]?o.return:c[0]?o.throw||((r=o.return)&&r.call(o),0):o.next)&&!(r=r.call(o,c[1])).done)return r;switch(o=0,r&&(c=[2&c[0],r.value]),c[0]){case 0:case 1:r=c;break;case 4:return a.label++,{value:c[1],done:!1};case 5:a.label++,o=c[1],c=[0];continue;case 7:c=a.ops.pop(),a.trys.pop();continue;default:if(!((r=(r=a.trys).length>0&&r[r.length-1])||6!==c[0]&&2!==c[0])){a=0;continue}if(3===c[0]&&(!r||c[1]>r[0]&&c[1]<r[3])){a.label=c[1];break}if(6===c[0]&&a.label<r[1]){a.label=r[1],r=c;break}if(r&&a.label<r[2]){a.label=r[2],a.ops.push(c);break}r[2]&&a.ops.pop(),a.trys.pop();continue}c=n.call(e,a)}catch(e){c=[6,e],o=0}finally{t=r=0}if(5&c[0])throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}([c,s])}}}(this,(function(t){switch(t.label){case 0:return e?[4,h(n)]:[3,2];case 1:t.sent(),t.label=2;case 2:return[2]}}))},new((r=void 0)||(r=Promise))((function(e,n){function a(e){try{s(i.next(e))}catch(e){n(e)}}function c(e){try{s(i.throw(e))}catch(e){n(e)}}function s(n){var t;n.done?e(n.value):(t=n.value,t instanceof r?t:new r((function(e){e(t)}))).then(a,c)}s((i=i.apply(t,o||[])).next())}));var t,o,r,i};const m=function(e){var n,t=function(e){var n=Array.from(document.getElementsByTagName("meta")),t="";return n.forEach((function(n){n.getAttribute("name")!==e&&n.getAttribute("property")!==e||(t=n.getAttribute("content"))})),t}(e);return t?((n={})[e]=t,n):{}};var b=function(){return b=Object.assign||function(e){for(var n,t=1,o=arguments.length;t<o;t++)for(var r in n=arguments[t])Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r]);return e},b.apply(this,arguments)};const y=function(e,n){return b(b({},e),n)},w=function(e){var n=e.META_TAGS;return n&&n.length?function(e){var n=Object.keys(e).map(function(e){return function(n){return"meta[".concat(n,"]=").concat(e[n])}}(e)).join("&");return n?"&".concat(n):""}(n.map(m).reduce(y,{})):""},C=function(e){var n=Object.keys(e).length,t="";return 0===n||Object.keys(e).map((function(o,r){return t+="".concat(o,"=").concat(e[o]).concat(r<n-1?"&":"")})),t},E=function(e,n){return function(t){var o,r,i=e.VARIABLES_DELIMITER,a=t.split(i||"."),c=a[a.length-1],s=n.split(i).length>1?function(e,n){var t=e.VARIABLES_DELIMITER,o=n.split(t||".").slice(0),r=o[o.length-1],i={},a=function(e){return o.forEach((function(n){return n!==r?o.shift()&&a(e[n]):i=e[n]}))},c=o[0];return"object"==typeof window[c]&&a(window),"object"==typeof i?i:{}}(e,n):n;return void 0!==s?(r=a.reduce((function(e,n){if(e&&void 0!==e[n])return e[n];if(e&&Array.isArray(e)){var t=e.filter((function(e){return Object.keys(e).find((function(e){return e===c}))}));return t.length>0?t[t.length-1][c]:void 0}}),s),"string"==typeof r?((o={})[c]=r,o):{}):{}}};var T=function(){return T=Object.assign||function(e){for(var n,t=1,o=arguments.length;t<o;t++)for(var r in n=arguments[t])Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r]);return e},T.apply(this,arguments)};const S=function(e,n){return T(T({},e),n)};var I=function(e){var n=e.ROOT_VARIABLE,t=e.SITE_VARIABLES;if(!n||0===n.length||!t||!t.length)return"";var o,r=function(e){var n=[];return"string"==typeof e&&n.push(e),Array.isArray(e)&&n.push.apply(n,e),n}(n),i=[];return r.forEach((function(n){var o=t.map(E(e,n)).reduce(S,{});return i.push(o)})),o="",i.forEach((function(e){return""!==C(e)?o+="&".concat(C(e)):""})),o||""},D=function(e,n){return t=void 0,r=void 0,a=function(){var t,r,i,a,c,s,l,u,f;return function(e,n){var t,o,r,i,a={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return i={next:c(0),throw:c(1),return:c(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function c(c){return function(s){return function(c){if(t)throw new TypeError("Generator is already executing.");for(;i&&(i=0,c[0]&&(a=0)),a;)try{if(t=1,o&&(r=2&c[0]?o.return:c[0]?o.throw||((r=o.return)&&r.call(o),0):o.next)&&!(r=r.call(o,c[1])).done)return r;switch(o=0,r&&(c=[2&c[0],r.value]),c[0]){case 0:case 1:r=c;break;case 4:return a.label++,{value:c[1],done:!1};case 5:a.label++,o=c[1],c=[0];continue;case 7:c=a.ops.pop(),a.trys.pop();continue;default:if(!((r=(r=a.trys).length>0&&r[r.length-1])||6!==c[0]&&2!==c[0])){a=0;continue}if(3===c[0]&&(!r||c[1]>r[0]&&c[1]<r[3])){a.label=c[1];break}if(6===c[0]&&a.label<r[1]){a.label=r[1],r=c;break}if(r&&a.label<r[2]){a.label=r[2],a.ops.push(c);break}r[2]&&a.ops.pop(),a.trys.pop();continue}c=n.call(e,a)}catch(e){c=[6,e],o=0}finally{t=r=0}if(5&c[0])throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}([c,s])}}}(this,(function(d){switch(d.label){case 0:t=function(e){return e?2:1}(e),r=w(n),i=I(n),a=i.substring(1),c=n.API_HOST,s=n.API_TRACK_URL,l="".concat(c).concat(s,"?s2s=").concat(t),u=function(e){if(e.TRACK_PAGE_URL){var n=window.location.href,t=n.split("?")[0];return"&page_url=".concat(t||n)}return""}(n),f=function(e){if(e.TRACK_PAGE_REFERRER){var n=window.document.referrer,t=n.split("?")[0],o=window.location.href;return n||(t=o.split("?")[0]),"&page_referrer=".concat(t||o)}return""}(n),d.label=1;case 1:return d.trys.push([1,3,,4]),[4,o()({method:"post",url:l,data:a+r+f+u,withCredentials:!0,timeout:4e3})];case 2:return[2,{data:d.sent().data,error:null}];case 3:return[2,{data:null,error:d.sent().message}];case 4:return[2]}}))},new((i=void 0)||(i=Promise))((function(e,n){function o(e){try{s(a.next(e))}catch(e){n(e)}}function c(e){try{s(a.throw(e))}catch(e){n(e)}}function s(n){var t;n.done?e(n.value):(t=n.value,t instanceof i?t:new i((function(e){e(t)}))).then(o,c)}s((a=a.apply(t,r||[])).next())}));var t,r,i,a},O=function(e,n){return t=this,o=void 0,i=function(){return function(e,n){var t,o,r,i,a={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return i={next:c(0),throw:c(1),return:c(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function c(c){return function(s){return function(c){if(t)throw new TypeError("Generator is already executing.");for(;i&&(i=0,c[0]&&(a=0)),a;)try{if(t=1,o&&(r=2&c[0]?o.return:c[0]?o.throw||((r=o.return)&&r.call(o),0):o.next)&&!(r=r.call(o,c[1])).done)return r;switch(o=0,r&&(c=[2&c[0],r.value]),c[0]){case 0:case 1:r=c;break;case 4:return a.label++,{value:c[1],done:!1};case 5:a.label++,o=c[1],c=[0];continue;case 7:c=a.ops.pop(),a.trys.pop();continue;default:if(!((r=(r=a.trys).length>0&&r[r.length-1])||6!==c[0]&&2!==c[0])){a=0;continue}if(3===c[0]&&(!r||c[1]>r[0]&&c[1]<r[3])){a.label=c[1];break}if(6===c[0]&&a.label<r[1]){a.label=r[1],r=c;break}if(r&&a.label<r[2]){a.label=r[2],a.ops.push(c);break}r[2]&&a.ops.pop(),a.trys.pop();continue}c=n.call(e,a)}catch(e){c=[6,e],o=0}finally{t=r=0}if(5&c[0])throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}([c,s])}}}(this,(function(t){switch(t.label){case 0:return e?[4,D(!1,n)]:[3,2];case 1:t.sent(),t.label=2;case 2:return[2]}}))},new((r=void 0)||(r=Promise))((function(e,n){function a(e){try{s(i.next(e))}catch(e){n(e)}}function c(e){try{s(i.throw(e))}catch(e){n(e)}}function s(n){var t;n.done?e(n.value):(t=n.value,t instanceof r?t:new r((function(e){e(t)}))).then(a,c)}s((i=i.apply(t,o||[])).next())}));var t,o,r,i},A=function(n,t){var o,r=null===(o=window[t])||void 0===o?void 0:o.transactionId;if(r){var i=n.includes("?")?"&":"?";return"".concat(n).concat(i,"transactionId=").concat(r)}return e.logDebug("No transactionId found in ".concat(t," namespace. Returning original URL...")),n},k={},x=function(n){var t=n.iFrameUrl,o=n.iFrameId,r=void 0===o?"GENERIC":o,i=n.isSrcDocUsed,a=void 0!==i&&i,c=n.suppressTransactionId,s=void 0!==c&&c,l=n.environment;if(t){var u=s?t:A(t,l),f=a?"src":"srcdoc",d=r;k[d]?(a?k[d].srcdoc=t:k[d].src=u,k[d].removeAttribute(f)):k[d]=function(e,n,t){if(document.body){var o=document.body.appendChild(document.createElement("div"));o.style.position="absolute",o.style.top="0",o.style.left="0",o.style.width="1px",o.style.height="1px",o.style.display="none";var r=function(e,n,t){var o=document.createElement("iframe");return o.setAttribute("id",n),t?o.setAttribute("srcdoc","".concat(e)):o.setAttribute("src","".concat(e)),o.setAttribute("frameborder","0"),o.setAttribute("height","1"),o.setAttribute("width","1"),o}(e,n,t);return o.appendChild(r),r}}(a?t:u,r,a)}else e.logError("Missing iframe URL. Unable to create iFrame for ID ".concat(r))},N=function(e){return n=void 0,t=void 0,i=function(){var n,t,r,i,a,c;return function(e,n){var t,o,r,i,a={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return i={next:c(0),throw:c(1),return:c(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function c(c){return function(s){return function(c){if(t)throw new TypeError("Generator is already executing.");for(;i&&(i=0,c[0]&&(a=0)),a;)try{if(t=1,o&&(r=2&c[0]?o.return:c[0]?o.throw||((r=o.return)&&r.call(o),0):o.next)&&!(r=r.call(o,c[1])).done)return r;switch(o=0,r&&(c=[2&c[0],r.value]),c[0]){case 0:case 1:r=c;break;case 4:return a.label++,{value:c[1],done:!1};case 5:a.label++,o=c[1],c=[0];continue;case 7:c=a.ops.pop(),a.trys.pop();continue;default:if(!((r=(r=a.trys).length>0&&r[r.length-1])||6!==c[0]&&2!==c[0])){a=0;continue}if(3===c[0]&&(!r||c[1]>r[0]&&c[1]<r[3])){a.label=c[1];break}if(6===c[0]&&a.label<r[1]){a.label=r[1],r=c;break}if(r&&a.label<r[2]){a.label=r[2],a.ops.push(c);break}r[2]&&a.ops.pop(),a.trys.pop();continue}c=n.call(e,a)}catch(e){c=[6,e],o=0}finally{t=r=0}if(5&c[0])throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}([c,s])}}}(this,(function(s){switch(s.label){case 0:n=e.API_HOST,t=e.API_FACEBOOK_URL,r=e.FACEBOOK_ID,i=e.FACEBOOK_IFRAME_ID,a="".concat(n).concat(t,"?id=").concat(r,"&out=json"),s.label=1;case 1:return s.trys.push([1,3,,4]),[4,o()({method:"get",url:a,withCredentials:!0,timeout:4e3})];case 2:return c=s.sent().data,x({iFrameUrl:c["target.url"],iFrameId:i,isSrcDocUsed:!1,suppressTransactionId:!0,environment:l.Teavaro}),[2,{data:"Facebook iFrame Set",error:null}];case 3:return[2,{data:null,error:s.sent().message}];case 4:return[2]}}))},new((r=void 0)||(r=Promise))((function(e,o){function a(e){try{s(i.next(e))}catch(e){o(e)}}function c(e){try{s(i.throw(e))}catch(e){o(e)}}function s(n){var t;n.done?e(n.value):(t=n.value,t instanceof r?t:new r((function(e){e(t)}))).then(a,c)}s((i=i.apply(n,t||[])).next())}));var n,t,r,i},_=function(e,n){return t=this,o=void 0,i=function(){return function(e,n){var t,o,r,i,a={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return i={next:c(0),throw:c(1),return:c(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function c(c){return function(s){return function(c){if(t)throw new TypeError("Generator is already executing.");for(;i&&(i=0,c[0]&&(a=0)),a;)try{if(t=1,o&&(r=2&c[0]?o.return:c[0]?o.throw||((r=o.return)&&r.call(o),0):o.next)&&!(r=r.call(o,c[1])).done)return r;switch(o=0,r&&(c=[2&c[0],r.value]),c[0]){case 0:case 1:r=c;break;case 4:return a.label++,{value:c[1],done:!1};case 5:a.label++,o=c[1],c=[0];continue;case 7:c=a.ops.pop(),a.trys.pop();continue;default:if(!((r=(r=a.trys).length>0&&r[r.length-1])||6!==c[0]&&2!==c[0])){a=0;continue}if(3===c[0]&&(!r||c[1]>r[0]&&c[1]<r[3])){a.label=c[1];break}if(6===c[0]&&a.label<r[1]){a.label=r[1],r=c;break}if(r&&a.label<r[2]){a.label=r[2],a.ops.push(c);break}r[2]&&a.ops.pop(),a.trys.pop();continue}c=n.call(e,a)}catch(e){c=[6,e],o=0}finally{t=r=0}if(5&c[0])throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}([c,s])}}}(this,(function(t){switch(t.label){case 0:return e?[4,N(n)]:[3,2];case 1:t.sent(),t.label=2;case 2:return[2]}}))},new((r=void 0)||(r=Promise))((function(e,n){function a(e){try{s(i.next(e))}catch(e){n(e)}}function c(e){try{s(i.throw(e))}catch(e){n(e)}}function s(n){var t;n.done?e(n.value):(t=n.value,t instanceof r?t:new r((function(e){e(t)}))).then(a,c)}s((i=i.apply(t,o||[])).next())}));var t,o,r,i},L=function(n){return t=void 0,r=void 0,a=function(){var t,r,i,a,c,s,u,f,d,p;return function(e,n){var t,o,r,i,a={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return i={next:c(0),throw:c(1),return:c(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function c(c){return function(s){return function(c){if(t)throw new TypeError("Generator is already executing.");for(;i&&(i=0,c[0]&&(a=0)),a;)try{if(t=1,o&&(r=2&c[0]?o.return:c[0]?o.throw||((r=o.return)&&r.call(o),0):o.next)&&!(r=r.call(o,c[1])).done)return r;switch(o=0,r&&(c=[2&c[0],r.value]),c[0]){case 0:case 1:r=c;break;case 4:return a.label++,{value:c[1],done:!1};case 5:a.label++,o=c[1],c=[0];continue;case 7:c=a.ops.pop(),a.trys.pop();continue;default:if(!((r=(r=a.trys).length>0&&r[r.length-1])||6!==c[0]&&2!==c[0])){a=0;continue}if(3===c[0]&&(!r||c[1]>r[0]&&c[1]<r[3])){a.label=c[1];break}if(6===c[0]&&a.label<r[1]){a.label=r[1],r=c;break}if(r&&a.label<r[2]){a.label=r[2],a.ops.push(c);break}r[2]&&a.ops.pop(),a.trys.pop();continue}c=n.call(e,a)}catch(e){c=[6,e],o=0}finally{t=r=0}if(5&c[0])throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}([c,s])}}}(this,(function(g){switch(g.label){case 0:if(t=n.API_FLOODLIGHT_PATH,r=n.FLOODLIGHT_ID,i=n.API_HOST,a="string"==typeof(h=t)&&h?[h]:Array.isArray(h)?h:[],!r)return c="No Floodlight ID specified in config. Can not make Floodlight calls.",e.logError(c),[2,{data:null,error:c}];s=[],a.forEach((function(e){var n="".concat(i).concat(e,"?out=json");s.push(o()({method:"get",url:n,withCredentials:!0,timeout:4e3}))})),g.label=1;case 1:return g.trys.push([1,3,,4]),u=1,f=[],[4,Promise.all(s)];case 2:return(d=g.sent()).forEach((function(n){var t=n.data;if(t["target.url"]){var o="".concat(r,"-").concat(u);x({iFrameUrl:t["target.url"],iFrameId:o,isSrcDocUsed:!1,suppressTransactionId:!0,environment:l.Teavaro}),f.push(o),u+=1,e.logDebug("Floodlight call made from an iframe. Url:",t["target.url"],"Floodlight ID:",o)}else e.logError("No target url in returned data. Can not make Floodlight calls.")})),[2,{data:{urls:d.map((function(e){return e.data["target.url"]})),iframesIds:f},error:null}];case 3:return p=g.sent(),e.logError("Error occurred while making Floodlight calls: ",p.message),[2,{data:null,error:p.message}];case 4:return[2]}var h}))},new((i=void 0)||(i=Promise))((function(e,n){function o(e){try{s(a.next(e))}catch(e){n(e)}}function c(e){try{s(a.throw(e))}catch(e){n(e)}}function s(n){var t;n.done?e(n.value):(t=n.value,t instanceof i?t:new i((function(e){e(t)}))).then(o,c)}s((a=a.apply(t,r||[])).next())}));var t,r,i,a},P=function(e,n){return t=this,o=void 0,i=function(){return function(e,n){var t,o,r,i,a={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return i={next:c(0),throw:c(1),return:c(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function c(c){return function(s){return function(c){if(t)throw new TypeError("Generator is already executing.");for(;i&&(i=0,c[0]&&(a=0)),a;)try{if(t=1,o&&(r=2&c[0]?o.return:c[0]?o.throw||((r=o.return)&&r.call(o),0):o.next)&&!(r=r.call(o,c[1])).done)return r;switch(o=0,r&&(c=[2&c[0],r.value]),c[0]){case 0:case 1:r=c;break;case 4:return a.label++,{value:c[1],done:!1};case 5:a.label++,o=c[1],c=[0];continue;case 7:c=a.ops.pop(),a.trys.pop();continue;default:if(!((r=(r=a.trys).length>0&&r[r.length-1])||6!==c[0]&&2!==c[0])){a=0;continue}if(3===c[0]&&(!r||c[1]>r[0]&&c[1]<r[3])){a.label=c[1];break}if(6===c[0]&&a.label<r[1]){a.label=r[1],r=c;break}if(r&&a.label<r[2]){a.label=r[2],a.ops.push(c);break}r[2]&&a.ops.pop(),a.trys.pop();continue}c=n.call(e,a)}catch(e){c=[6,e],o=0}finally{t=r=0}if(5&c[0])throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}([c,s])}}}(this,(function(t){switch(t.label){case 0:return e?[4,L(n)]:[3,2];case 1:return[2,t.sent()];case 2:return[2]}}))},new((r=void 0)||(r=Promise))((function(e,n){function a(e){try{s(i.next(e))}catch(e){n(e)}}function c(e){try{s(i.throw(e))}catch(e){n(e)}}function s(n){var t;n.done?e(n.value):(t=n.value,t instanceof r?t:new r((function(e){e(t)}))).then(a,c)}s((i=i.apply(t,o||[])).next())}));var t,o,r,i},R=function(n,t){return o=this,r=void 0,a=function(){return function(e,n){var t,o,r,i,a={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return i={next:c(0),throw:c(1),return:c(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function c(c){return function(s){return function(c){if(t)throw new TypeError("Generator is already executing.");for(;i&&(i=0,c[0]&&(a=0)),a;)try{if(t=1,o&&(r=2&c[0]?o.return:c[0]?o.throw||((r=o.return)&&r.call(o),0):o.next)&&!(r=r.call(o,c[1])).done)return r;switch(o=0,r&&(c=[2&c[0],r.value]),c[0]){case 0:case 1:r=c;break;case 4:return a.label++,{value:c[1],done:!1};case 5:a.label++,o=c[1],c=[0];continue;case 7:c=a.ops.pop(),a.trys.pop();continue;default:if(!((r=(r=a.trys).length>0&&r[r.length-1])||6!==c[0]&&2!==c[0])){a=0;continue}if(3===c[0]&&(!r||c[1]>r[0]&&c[1]<r[3])){a.label=c[1];break}if(6===c[0]&&a.label<r[1]){a.label=r[1],r=c;break}if(r&&a.label<r[2]){a.label=r[2],a.ops.push(c);break}r[2]&&a.ops.pop(),a.trys.pop();continue}c=n.call(e,a)}catch(e){c=[6,e],o=0}finally{t=r=0}if(5&c[0])throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}([c,s])}}}(this,(function(o){switch(o.label){case 0:return n?[4,(s=t,r=void 0,i=void 0,a=void 0,c=function(){return function(e,n){var t,o,r,i,a={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return i={next:c(0),throw:c(1),return:c(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function c(c){return function(s){return function(c){if(t)throw new TypeError("Generator is already executing.");for(;i&&(i=0,c[0]&&(a=0)),a;)try{if(t=1,o&&(r=2&c[0]?o.return:c[0]?o.throw||((r=o.return)&&r.call(o),0):o.next)&&!(r=r.call(o,c[1])).done)return r;switch(o=0,r&&(c=[2&c[0],r.value]),c[0]){case 0:case 1:r=c;break;case 4:return a.label++,{value:c[1],done:!1};case 5:a.label++,o=c[1],c=[0];continue;case 7:c=a.ops.pop(),a.trys.pop();continue;default:if(!((r=(r=a.trys).length>0&&r[r.length-1])||6!==c[0]&&2!==c[0])){a=0;continue}if(3===c[0]&&(!r||c[1]>r[0]&&c[1]<r[3])){a.label=c[1];break}if(6===c[0]&&a.label<r[1]){a.label=r[1],r=c;break}if(r&&a.label<r[2]){a.label=r[2],a.ops.push(c);break}r[2]&&a.ops.pop(),a.trys.pop();continue}c=n.call(e,a)}catch(e){c=[6,e],o=0}finally{t=r=0}if(5&c[0])throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}([c,s])}}}(this,(function(n){return e.logDebug("Clickserve is being called..."),fetch(s,{credentials:"include",mode:"no-cors"}).then((function(n){return e.logTrace("Clickserve response: ".concat(n))})),[2]}))},new(a||(a=Promise))((function(e,n){function t(e){try{s(c.next(e))}catch(e){n(e)}}function o(e){try{s(c.throw(e))}catch(e){n(e)}}function s(n){var r;n.done?e(n.value):(r=n.value,r instanceof a?r:new a((function(e){e(r)}))).then(t,o)}s((c=c.apply(r,i||[])).next())})))]:[3,2];case 1:o.sent(),o.label=2;case 2:return[2]}var r,i,a,c,s}))},new((i=void 0)||(i=Promise))((function(e,n){function t(e){try{s(a.next(e))}catch(e){n(e)}}function c(e){try{s(a.throw(e))}catch(e){n(e)}}function s(n){var o;n.done?e(n.value):(o=n.value,o instanceof i?o:new i((function(e){e(o)}))).then(t,c)}s((a=a.apply(o,r||[])).next())}));var o,r,i,a};const U=()=>"undefined"!=typeof FC_CONF&&"string"==typeof FC_CONF.IDCONNECT_STORAGE_TYPE&&"localStorage"===FC_CONF.IDCONNECT_STORAGE_TYPE?"localStorage":"sessionStorage",F=(e,n)=>{window[U()].setItem(e,JSON.stringify(n))},j=e=>JSON.parse(window[U()].getItem(e));var G=function(){return G=Object.assign||function(e){for(var n,t=1,o=arguments.length;t<o;t++)for(var r in n=arguments[t])Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r]);return e},G.apply(this,arguments)},M=function(e){var n,t,r,i,a=e.parameters,c=e.fcConfiguration,s=e.body,l=e.umdidCookieValue;return n=void 0,t=void 0,i=function(){var e,n,t,r,i,u,f,d,p,g;return function(e,n){var t,o,r,i,a={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return i={next:c(0),throw:c(1),return:c(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function c(c){return function(s){return function(c){if(t)throw new TypeError("Generator is already executing.");for(;i&&(i=0,c[0]&&(a=0)),a;)try{if(t=1,o&&(r=2&c[0]?o.return:c[0]?o.throw||((r=o.return)&&r.call(o),0):o.next)&&!(r=r.call(o,c[1])).done)return r;switch(o=0,r&&(c=[2&c[0],r.value]),c[0]){case 0:case 1:r=c;break;case 4:return a.label++,{value:c[1],done:!1};case 5:a.label++,o=c[1],c=[0];continue;case 7:c=a.ops.pop(),a.trys.pop();continue;default:if(!((r=(r=a.trys).length>0&&r[r.length-1])||6!==c[0]&&2!==c[0])){a=0;continue}if(3===c[0]&&(!r||c[1]>r[0]&&c[1]<r[3])){a.label=c[1];break}if(6===c[0]&&a.label<r[1]){a.label=r[1],r=c;break}if(r&&a.label<r[2]){a.label=r[2],a.ops.push(c);break}r[2]&&a.ops.pop(),a.trys.pop();continue}c=n.call(e,a)}catch(e){c=[6,e],o=0}finally{t=r=0}if(5&c[0])throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}([c,s])}}}(this,(function(h){switch(h.label){case 0:e=w(c),n=I(c),t=function(e){var n="";return e.length>0&&e.forEach((function(e){e.key&&(n=n.concat("&".concat(e.key)),e.value&&(n=n.concat("=".concat(e.value))))})),n}(a),r=c.API_HOST,i=c.API_INFO_URL,u=c.SESSION_STORAGE,f="".concat(r).concat(i,"?out=json"),d=l?"&umdid=".concat(l):"",p="".concat(t).concat(e||"").concat(n),h.label=1;case 1:return h.trys.push([1,3,,4]),[4,o()(G({method:s?"post":"get",url:"".concat(f).concat(p||"").concat(d),withCredentials:!0,timeout:4e3},s&&{data:s}))];case 2:return g=h.sent().data,F(u,g),[2,{data:g,error:null}];case 3:return[2,{data:null,error:h.sent().message}];case 4:return[2]}}))},new((r=void 0)||(r=Promise))((function(e,o){function a(e){try{s(i.next(e))}catch(e){o(e)}}function c(e){try{s(i.throw(e))}catch(e){o(e)}}function s(n){var t;n.done?e(n.value):(t=n.value,t instanceof r?t:new r((function(e){e(t)}))).then(a,c)}s((i=i.apply(n,t||[])).next())}))};const B={onIdsAvailable:{name:"onIdsAvailable",fieldsTemplate:[{key:"mtid",isOptional:!1,type:"string"},{key:"atid",isOptional:!1,type:"string"}]}},q={...B,onConsentUpdateFinished:{name:"onConsentUpdateFinished",fieldsTemplate:[{key:"isConsentGranted",isOptional:!1,type:"boolean"}]},onConsentChanging:{name:"onConsentChanging",fieldsTemplate:[{key:"isConsentGranted",isOptional:!1,type:"boolean"}]},onInitialised:{name:"onInitialised",fieldsTemplate:[]},onEligibilityChecked:{name:"onEligibilityChecked",fieldsTemplate:[{key:"isEligible",isOptional:!1,type:"boolean"}]},onDidomiConsentChanged:{name:"onDidomiConsentChanged",fieldsTemplate:[]}},$={...B,onFcDataAvailable:{name:"onFcDataAvailable",fieldsTemplate:[{key:"notificationStatus",isOptional:!1,type:"object"},{key:"permissions",isOptional:!1,type:"object"},{key:"attributes",isOptional:!1,type:"object"},{key:"state",isOptional:!1,type:"number"}]}},V=(n,t,o={})=>{const r=((n,t)=>{try{switch(n){case l.Teavaro:return $[t].fieldsTemplate;case l.Utiq:return q[t].fieldsTemplate;default:return e.logError(`Unrecognized environment ${n} for event ${t}`),null}}catch(n){return e.logError(`Event ${t} is not defined. Make sure that the event name is correct or create a new event with this name`),null}})(t,n),{isValid:i}=function(n){var t=n.fieldsTemplate,o=void 0===t?[]:t,r=n.validationTargetObject,i=n.logIdentificator;if(!i)return e.logError("Missing log identificator"),{isValid:!1};if(!r)return e.logError("Missing validation target for ".concat(i)),{isValid:!1};if("object"!=typeof r)return e.logError("Wrong type for ".concat(r)),{isValid:!1};if(null===o)return e.logError("Fields template were set to ".concat(o," for ").concat(i," and cannot be validated. Returning with negative validation result...")),{isValid:!1};0===o.length&&e.logDebug("No fields template provided for ".concat(i,". Continuing without fields validation..."));var a=Object.keys(r),c=o.map((function(e){return e.key}));if(!a.every((function(e){return c.includes(e)})))return e.logError("Validation target has more fields than present in ".concat(i," fields template.")),e.logWarn("Validation target keys:",a),e.logWarn("Fields template keys:",c),{isValid:!1};var s=[];try{o.forEach((function(e){if("string"==typeof e.key&&"boolean"==typeof e.isOptional&&"string"==typeof e.type){var n=e.key,t=r[n];null!=t?("array"===e.type?Array.isArray(t):typeof t===e.type&&!Array.isArray(t))||s.push("Field ".concat(e.key," expected type ").concat(e.type,", but got ").concat(typeof r[n]," for ").concat(i)):e.isOptional||s.push("Field ".concat(e.key," is missing for ").concat(i))}else s.push("Field template ".concat(JSON.stringify(e)," is of incorrect format for ").concat(i))}))}catch(e){s.push(e.message)}return s.forEach((function(n){e.logError(n)})),{isValid:0===s.length}}({fieldsTemplate:r,validationTargetObject:o,logIdentificator:n});if(i){const r=((e,n)=>e===l.Utiq?window.Utiq?.listeners?.[n]||[]:window.Teavaro?.listeners?.[n]||[])(t,n);if(!Array.isArray(r))return void e.logDebug(`Listeners for ${n} in the ${t} environment are not an array. Cannot publish the event...`);try{r.forEach((e=>{e(o,t)}))}catch(o){e.logDebug(`Error occurred when processing ${n} listeners in the ${t} environment. Description: ${o}.`)}}};var J=function(){return J=Object.assign||function(e){for(var n,t=1,o=arguments.length;t<o;t++)for(var r in n=arguments[t])Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r]);return e},J.apply(this,arguments)},K=function(e,n,t){if(t||2===arguments.length)for(var o,r=0,i=n.length;r<i;r++)!o&&r in n||(o||(o=Array.prototype.slice.call(n,0,r)),o[r]=n[r]);return e.concat(o||Array.prototype.slice.call(n))},H=function(e,n){var t,o,r,i;if("object"==typeof e&&"object"==typeof n&&0!==Object.keys(n).length){var a=J(J(J(J({},"boolean"==typeof n.onlineMarketing&&((t={})[e.permissionsKeys.onlineMarketing]=n.onlineMarketing,t)),"boolean"==typeof n.nextBestAction&&((o={})[e.permissionsKeys.nextBestAction]=n.nextBestAction,o)),"boolean"==typeof n.optimisation&&((r={})[e.permissionsKeys.optimisation]=n.optimisation,r)),"boolean"==typeof n.utiq&&((i={})[e.permissionsKeys.utiq]=n.utiq,i)),c=e.notificationsData.find((function(n){return n.permissions.includes(e.permissionsKeys.onlineMarketing)||n.permissions.includes(e.permissionsKeys.nextBestAction)||n.permissions.includes(e.permissionsKeys.optimisation)})),s=("boolean"==typeof n.onlineMarketing||"boolean"==typeof n.nextBestAction||"boolean"==typeof n.optimisation)&&Boolean(c),l=e.notificationsData.find((function(n){return n.permissions.includes(e.permissionsKeys.utiq)})),u="boolean"==typeof n.utiq&&Boolean(l);return{permission:a,notification:K(K([],s?[c]:[],!0),u?[l]:[],!0)}}return null},z=function(e,n,t){if(t||2===arguments.length)for(var o,r=0,i=n.length;r<i;r++)!o&&r in n||(o||(o=Array.prototype.slice.call(n,0,r)),o[r]=n[r]);return e.concat(o||Array.prototype.slice.call(n))},W=function(n){var t,o,r,i,a=n.infoConfigData,c=n.fcConfiguration,s=n.permissionsData,u=n.umdidCookieValue;return t=void 0,o=void 0,i=function(){var n,t,o,r,i,f,d,p,g,h,v,m;return function(e,n){var t,o,r,i,a={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return i={next:c(0),throw:c(1),return:c(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function c(c){return function(s){return function(c){if(t)throw new TypeError("Generator is already executing.");for(;i&&(i=0,c[0]&&(a=0)),a;)try{if(t=1,o&&(r=2&c[0]?o.return:c[0]?o.throw||((r=o.return)&&r.call(o),0):o.next)&&!(r=r.call(o,c[1])).done)return r;switch(o=0,r&&(c=[2&c[0],r.value]),c[0]){case 0:case 1:r=c;break;case 4:return a.label++,{value:c[1],done:!1};case 5:a.label++,o=c[1],c=[0];continue;case 7:c=a.ops.pop(),a.trys.pop();continue;default:if(!((r=(r=a.trys).length>0&&r[r.length-1])||6!==c[0]&&2!==c[0])){a=0;continue}if(3===c[0]&&(!r||c[1]>r[0]&&c[1]<r[3])){a.label=c[1];break}if(6===c[0]&&a.label<r[1]){a.label=r[1],r=c;break}if(r&&a.label<r[2]){a.label=r[2],a.ops.push(c);break}r[2]&&a.ops.pop(),a.trys.pop();continue}c=n.call(e,a)}catch(e){c=[6,e],o=0}finally{t=r=0}if(5&c[0])throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}([c,s])}}}(this,(function(b){switch(b.label){case 0:return a?(n="object"==typeof a&&"object"==typeof a.ident&&void 0!==a.ident.customerId&&void 0!==a.ident.customerKey,t={customerId:n?a.ident.customerId:null,customerKey:n?a.ident.customerKey:""},o="object"==typeof a&&"object"==typeof a.utiq&&void 0!==a.utiq.marTechPassKey,r=o?a.utiq.marTechPassKey:null,i=function(e){var n=null==e?void 0:e.customerId,t=(null==e?void 0:e.customerKey)||"fc_cid";return n&&t?{key:t,value:n}:{key:""}}(t),f=j("fcIdent"),d=i.value&&f!==i.value,p=function(n){try{var t=window.Utiq.API.getIdGraphEntry("mtid");if(1===t.split(" ").length)return{key:n,value:t}}catch(n){e.logDebug("getIdGraphEntry API call failed. Reason: ".concat(n.message))}return{key:""}}(r),g=j("fcMarTechPass"),h=p.value&&g!==p.value,v=z(z([{key:"attributes"},{key:"notifications"},{key:"permissions"}],d?[i]:[],!0),h?[p]:[],!0),[4,M({parameters:v,fcConfiguration:c,body:H(a,s),umdidCookieValue:u})]):[3,2];case 1:return m=b.sent(),e.logDebug("Info call invocation returned data: ".concat(m)),m&&m.data&&(function(n){if("object"==typeof n&&Object.keys(n).length>0){var t=n.attributes,o=n.notificationStatus,r=n.permissions,i=n.state;e.logDebug("Dispatching onFcDataAvailable event:",JSON.stringify({attributes:t,notificationStatus:o,permissions:r,state:i})),V($.onFcDataAvailable.name,l.Teavaro,{attributes:t,notificationStatus:o,permissions:r,state:i})}}(m.data),d&&F("fcIdent",i.value),h&&F("fcMarTechPass",p.value)),[2,m&&m.data];case 2:return[2,null]}}))},new((r=void 0)||(r=Promise))((function(e,n){function a(e){try{s(i.next(e))}catch(e){n(e)}}function c(e){try{s(i.throw(e))}catch(e){n(e)}}function s(n){var t;n.done?e(n.value):(t=n.value,t instanceof r?t:new r((function(e){e(t)}))).then(a,c)}s((i=i.apply(t,o||[])).next())}))},Y=function(e,n){"function"==typeof e&&e(n)};const X="utiqEligibility";var Q,Z=function(){(({connectionEligibilityData:n,onEligibilityCheckedCallback:t})=>{"object"==typeof n&&n!=={}&&"boolean"==typeof n.isEligible&&(localStorage.setItem(X,JSON.stringify(n)),e.logInfo(`Written new ${X} local storage entry: ${JSON.stringify(n)}`),"function"==typeof t&&t(n.isEligible))})({connectionEligibilityData:{isEligible:!1,eligibilityCheckTime:Date.now(),retryEligibilityCheckTime:Date.now()+6048e5},onEligibilityCheckedCallback:function(e){return V(q.onEligibilityChecked.name,l.Utiq,{isEligible:e})}}),e.logError("Telco identification call failed. Identification will be checked again in 7 days...")},ee=function(e){return"string"==typeof e&&"localStorage"===e?"localStorage":"sessionStorage"},ne=function(e){return function(n,t){return window[ee(e)].setItem(n,JSON.stringify(t))}},te=function(e){return function(n){return JSON.parse(window[ee(e)].getItem(n))}},oe=function(e){return{set:ne(e),get:te(e)}},re=function(e){var n,t,o=oe(e.IDCONNECT_STORAGE_TYPE).get(e.IDCONNECT_DATA_STORAGE),r=oe(e.IDCONNECT_STORAGE_TYPE).get(e.SESSION_STORAGE);return(null==r?void 0:r.umid)&&(null===(t=null===(n=null==o?void 0:o.ids)||void 0===n?void 0:n.target)||void 0===t?void 0:t.umdid)?c("".concat(o.ids.target.umdid,"|").concat(r.umid,"|1")):null},ie=function(n){var t=n.idConnectConfig,o=n.msg,r=n.idConnectConfiguration,i=n.idConnectInfoCall,a=n.environment;e.logDebug("Received data call message with ".concat(JSON.stringify(o))),"Utiq"===a?"utiq"===r.IDCONNECT_TYPE?function(n){var t,o,r=n.idConnectConfig,i=n.msg,a=n.idConnectConfiguration,c=n.environment;if(e.logDebug("Received Utiq data call message with ".concat(JSON.stringify(i))),"DONE"!==i.status)return e.logDebug("Message status different than DONE. Status: ".concat(i.status)),void e.logDebug("Stopping the calls flow...");if(!r.manualRouting||""!==r.nextBestDomain&&null!==r.nextBestDomain&&void 0!==r.nextBestDomain){var s=i.body;if(s){var l=s.data;if(r.connectId=l,l&&!function(e,n){if(Array.isArray(null==e?void 0:e.consents))return!0;var t=oe(n.IDCONNECT_STORAGE_TYPE).get(n.IDCONNECT_DATA_STORAGE);return!!(t&&t.connectId&&Array.isArray(t.connectId.consents)&&t.connectId.consents.length>0&&t.connectId.consents[0].domain&&t.connectId.consents[0].name&&t.connectId.consents[0].value)}(l,a)&&"function"==typeof(null===(o=null===(t=window.Utiq)||void 0===t?void 0:t.functions)||void 0===o?void 0:o.dispatchConsentCall)&&window.Utiq.functions.dispatchConsentCall(),!l||function(e,n){if(Array.isArray(null==e?void 0:e.idGraph))return!0;var t=oe(n.IDCONNECT_STORAGE_TYPE).get(n.IDCONNECT_DATA_STORAGE);return!!(t&&t.connectId&&Array.isArray(t.connectId.idGraph)&&t.connectId.idGraph.length>0&&t.connectId.idGraph[0].domain&&t.connectId.idGraph[0].mtid&&t.connectId.idGraph[0].atid)}(l,a))!function(e){var n={nextBestDomain:e.nextBestDomain,connectId:e.connectId,ids:{source:{connectId:e.connectId,domain:e.domain,umdid:e.umdid,originalUmdidCookie:e.originalUmdidCookie,dataOriginalUmdidCookie:e.dataOriginalUmdidCookie},target:{connectId:null,domain:e.nextBestDomain,umdid:null,umdidCookie:null}}};if(Array.isArray(e.connectId.idGraph))for(var t=0,o=e.connectId.idGraph;t<o.length;t++)void 0!==o[t].mtid&&(n.connectStatus="OK");Y(e.callbackSuccess,n)}(r);else{var u="".concat(r.protocol,"://")+"".concat(r.domain,"/").concat(r.path,"/mno-selector")+"?d=".concat(new URL(a.IDCONNECT_API_HOST).hostname)+"&onbd=".concat(r.nextBestDomain);x({iFrameUrl:u,iFrameId:"MNOSELECTOR",environment:c})}}else e.logDebug("Message body is not present. Terminating the flow...")}else e.logDebug("IDCONNECT_NEXT_BEST_DOMAIN value must be defined when IDCONNECT_MANUAL_ROUTING is set to 'true'")}({idConnectConfig:t,msg:o,idConnectConfiguration:r,environment:a}):e.logWarn("Cannot call getDataMessageUtiq due to environment ".concat(a," and IDCONNECT_TYPE ").concat(r.IDCONNECT_TYPE," ")):function(n){var t,o,r,i,a=n.idConnectConfig,c=n.msg,s=n.idConnectConfiguration,l=n.idConnectInfoCall,u=n.environment;if(e.logDebug("Received cross domain data call message with ".concat(c)),"DONE"!==c.status)return e.logDebug("Message status different than DONE. Status: ".concat(c.status)),void e.logDebug("Stopping the calls flow...");var f=c.body;if(f){a.connectId=f.data,a.originalUmdidCookie=f.originalUmdidCookie,a.umdid=function(e,n){if(null==n?void 0:n.idGraph)for(var t=0,o=n.idGraph;t<o.length;t++){var r=o[t];if(r.domain===e.domain)return r.umdid}return null}(a,f.data);var d={connectId:a.connectId,connectStatus:"OK",ids:(null===(t=oe(s.IDCONNECT_STORAGE_TYPE).get(s.IDCONNECT_DATA_STORAGE))||void 0===t?void 0:t.ids)||null,nextBestDomain:(null===(o=oe(s.IDCONNECT_STORAGE_TYPE).get(s.IDCONNECT_DATA_STORAGE))||void 0===o?void 0:o.nextBestDomain)||null};if(Y(a.callbackSuccess,d),null===(r=a.connectId)||void 0===r?void 0:r.idGraph){var p=re(s);p&&l&&l(p)}else{var g=null;a.manualRouting&&a.nextBestDomain?(e.logDebug("Next best domain set: ".concat(a.nextBestDomain)),a.dataUmdidCookie=f.umdidCookie,g="".concat(a.protocol,"://")+"".concat(a.nextBestDomain)+"/".concat(a.path)+"/connect?c=".concat(f.data.value)+"&d=".concat(f.data.domain)+"".concat(a.umdid?"&u=".concat(a.umdid):"")):f.nextBestDomain&&(e.logDebug("Next best domain from message: ".concat(f.nextBestDomain)),a.nextBestDomain=f.nextBestDomain,g="".concat(a.protocol,"://")+"".concat(a.nextBestDomain,"/")+"".concat(a.path,"/connect")),!(null===(i=a.connectId)||void 0===i?void 0:i.idGraph)&&g&&x({iFrameUrl:g,iFrameId:"CONNECT",environment:u})}}else e.logDebug("Message body is not present. Terminating the flow...")}({idConnectConfig:t,msg:o,idConnectConfiguration:r,idConnectInfoCall:i,environment:a})},ae=Object.freeze({OK:200,Found:302,TemporaryRedirect:307}),ce=Object.freeze({Stub:"stub",MspProxy:"mspProxy",UtiqCrossDomain:"utiqCrossDomain",Token:"token",Saml:"saml"}),se="Verify origin:",le=function(n){var t=n.idConnectConfig,i=n.environment,a=n.callbackSuccess,c=n.idConnectConfiguration,s=n.idConnectInfoCall;if(!re(c)){e.logDebug("Setting initial FC callbacks, listeners and data call"),t.callbackSuccess=a,void 0!==window[i].idConnectMessageListener&&(e.logDebug("IDconnect data call listener already defined. Removing the listener..."),window.removeEventListener("message",window[i].idConnectMessageListener));var u="Teavaro"===i&&"crossdomain"===c.IDCONNECT_TYPE,f="Utiq"===i&&"utiq"===c.IDCONNECT_TYPE;(u||f)&&(e.logDebug("Recreating IDconnect data call listener..."),window[i].idConnectMessageListener=function(n){var t=n.idConnectConfig,i=n.idConnectConfiguration,a=n.idConnectInfoCall,c=n.environment;return function(n){e.logDebug("Message is being handled");var s=i.IDCONNECT_DOMAIN_STORAGE_TRANSLATION&&i.IDCONNECT_DOMAIN_STORAGE_TRANSLATION[t.mnoSelectorDomain]?i.IDCONNECT_DOMAIN_STORAGE_TRANSLATION[t.mnoSelectorDomain]:t.mnoSelectorDomain;if(function(n){var t=n.origin,o=n.domain,r=n.nextBestDomain,i=n.mnoSelectorDomain,a=n.protocol,c=Boolean(t),s=window.location.origin===t,l=!!o&&"".concat(a,"://").concat(o)===t,u=!!r&&"".concat(a,"://").concat(r)===t,f=!!i&&"".concat(a,"://").concat(i)===t;e.logDebug(se,"Origin ".concat(t," is defined -> ").concat(c)),e.logDebug(se,"Current domain to verify: ".concat(window.location.origin," -> ").concat(s)),e.logDebug(se,"IdConnect domain to verify: ".concat(o," -> ").concat(l)),e.logDebug(se,"Next best domain to verify: ".concat(r," -> ").concat(u)),e.logDebug(se,"MNO domain to verify: ".concat(i," -> ").concat(f));var d=c&&(s||l||u||f);return e.logDebug("Origin is verified - ".concat(d)),d}({origin:n.origin,domain:t.domain,nextBestDomain:t.nextBestDomain,mnoSelectorDomain:s,protocol:t.protocol}))if(null==n?void 0:n.data){var u;try{u=JSON.parse(n.data)}catch(n){return void e.logDebug("Error when parsing event message: ".concat(n))}switch(u.msgType){case"GETDATA":ie({idConnectConfig:t,msg:u,idConnectConfiguration:i,idConnectInfoCall:a,environment:c});break;case"CONNECT":!function(n){var t,o,r=n.idConnectConfig,i=n.msg,a=n.event,c=n.idConnectConfiguration,s=n.environment;switch(e.logDebug("Received connect call message with ".concat(JSON.stringify(i))),i.status){case"SEND":var u={msgType:"CONNECT",status:"EXCHANGE",data:{transactionId:r.transactionId,connectId:r.connectId.value,connectDomain:r.connectId.domain,umdid:r.umdid}};a.source.postMessage(JSON.stringify(u),"*");break;case"NOUMDID":var f={nextBestDomain:r.nextBestDomain,connectId:r.connectId,ids:{source:{connectId:r.connectId,domain:r.domain,umdid:r.umdid,originalUmdidCookie:r.originalUmdidCookie,dataOriginalUmdidCookie:r.dataOriginalUmdidCookie},target:{connectId:null,domain:r.nextBestDomain,umdid:null,umdidCookie:null}},connectStatus:"NOUMDID"};Y(r.callbackSuccess,f);break;case"DONE":if(s===l.Utiq&&"NotCreated"===(null===(o=null===(t=null==i?void 0:i.body)||void 0===t?void 0:t.status)||void 0===o?void 0:o.StatusC1))return void Z();if(c.IDCONNECT_ALLOW_TOKEN_DATA_CALL&&c.IDCONNECT_ALLOW_TOKEN_DATA_CALL_COUNTER&&r.dataCallCounter<=c.IDCONNECT_ALLOW_TOKEN_DATA_CALL_COUNTER){r.dataCallCounter++;var d="".concat(r.protocol,"://").concat(r.domain,"/")+"".concat(r.path,"/data");x({iFrameUrl:d,iFrameId:"GETDATA",environment:s})}i.body.ids.source.originalUmdidCookie=r.originalUmdidCookie;var p={nextBestDomain:r.nextBestDomain,connectId:r.connectId,ids:i.body.ids,connectStatus:i.body.status.StatusC1};Y(r.callbackSuccess,p);break;case"ERROR":s===l.Utiq&&Z();break;case"NOLOCALSTORAGEACCESS":return;default:e.logError("Unsupported connect message status: ".concat(i.status,". Stopping the flow..."))}}({idConnectConfig:t,msg:u,event:n,idConnectConfiguration:i,environment:c});break;case"MNOSELECTOR":!function(n,t,r,i){if(t.body)if(Array.isArray(r.IDCONNECT_ALLOWED_USE_CASES))if(r.IDCONNECT_ALLOWED_USE_CASES.includes(t.body.useCase))if(t.body.url)switch(n.useCase=t.body.useCase,n.mnoSelectorDomain=t.body.url.split("/")[2],n.useCase){case ce.Stub:o()({method:"get",url:t.body.url,timeout:4e3}).then((function(e){if([ae.OK,ae.Found,ae.TemporaryRedirect].includes(e.status)){n.token=e.data.token;var t="".concat(n.protocol,"://").concat(n.mnoSelectorDomain,"/").concat(n.path)+"/tmi-stub?c=".concat(n.connectId.value)+"&token=".concat(n.token)+"&d=".concat(n.domain);x({iFrameUrl:t,iFrameId:"UTIQSTUB",environment:i})}})).catch((function(n){e.logError("Error occurred on idConnect consent call")}));break;case ce.MspProxy:case ce.Saml:case ce.UtiqCrossDomain:x({iFrameUrl:t.body.url,environment:i});break;case ce.Token:x({iFrameUrl:t.body.url,iFrameId:"IDENT",environment:i});break;default:e.logError("Unsupported idConnect ".concat(n.useCase," use case provided"))}else e.logDebug("No URL in message body. Terminating the flow...");else e.logDebug("MNO Use Case ".concat(t.body.useCase," not defined in IDCONNECT_ALLOWED_USE_CASES. Terminating the flow..."));else e.logDebug("IDCONNECT_ALLOWED_USE_CASES is not an array of strings. Terminating the flow...");else e.logDebug("Message body is not present. Terminating the flow...")}(t,u,i,c);break;case"IDENT":!function(e,n){e.token=n.body.token,e.net=n.body.net;var t="".concat(e.protocol,"://").concat(e.mnoSelectorDomain,"/").concat(e.path)+"/tmi-vfde?c=".concat(e.connectId.value)+"&d=".concat(e.domain)+"&token=".concat(e.token,"&net=").concat(e.net);x({iFrameUrl:t,iFrameId:"UTIQVFDE",environment:l.Teavaro})}(t,u);break;case"SETCOOKIEDOMAIN":!function(e,n){void 0!==e.SetCookieDomain&&""!==e.SetCookieDomain&&x({iFrameUrl:r(e.SetCookieDomain),iFrameId:"SetCookieDomain",environment:n})}(u,c);break;default:e.logWarn("Unsupported message type ".concat(u.msgType))}}else e.logDebug("Message event had no data");else e.logDebug("Origin does not include current or next best domain. Protocol:",t.protocol,"; domain:",t.domain,"; next best domain",t.nextBestDomain,"Event origin:",n.origin)}}({idConnectConfig:t,idConnectConfiguration:c,idConnectInfoCall:s,environment:i}),e.logDebug("IDconnect data call listener recreated.")),function(n){var t,o,r,i,a,c;e.logDebug("Checking if data call should be made...");var s=null===(c=null===(a=null===(i=null===(r=null===(o=null===(t=window[n])||void 0===t?void 0:t.data)||void 0===o?void 0:o.clientConfig)||void 0===r?void 0:r.CALLS_CONFIG)||void 0===i?void 0:i.conditions)||void 0===a?void 0:a.timeConditions)||void 0===c?void 0:c.oncePerTimeInterval;if(!s)return e.logDebug("Interval setting is not present. Removing FC_LAST_DATA_CALL_TIME and making data call..."),localStorage.removeItem("FC_LAST_DATA_CALL_TIME"),!0;var l=Date.now(),u=JSON.parse(localStorage.getItem("FC_LAST_DATA_CALL_TIME"));return u?u+parseInt(String(s),10)<l?(e.logDebug("Time interval passed. Update FC_LAST_DATA_CALL_TIME time and invoke data call..."),localStorage.setItem("FC_LAST_DATA_CALL_TIME",String(l)),!0):(e.logDebug("Local Storage timestamp found. Data call will not be made."),!1):(e.logDebug("Local Storage FC_LAST_DATA_CALL_TIME not found. Update FC_LAST_DATA_CALL_TIME time and invoke data call..."),localStorage.setItem("FC_LAST_DATA_CALL_TIME",String(l)),!0)}(i)&&(t.dataCallCounter++,e.logDebug("Adding IDconnect data call listener..."),window.addEventListener("message",window[i].idConnectMessageListener,!1),e.logDebug("Making IDconnect data call..."),function(n,t){var r="".concat(n.protocol,"://")+"".concat(n.domain,"/")+"".concat(n.path,"/data");""!==n.nextBestDomain&&n.manualRouting&&(r+="?onbd=".concat(encodeURIComponent(n.nextBestDomain))),o()({method:"get",url:A(r,t),withCredentials:!0,timeout:4e3}).then((function(n){if(200===n.status)x({iFrameUrl:n.data,iFrameId:"GETDATA",isSrcDocUsed:!0,environment:t});else if(204===n.status)try{window.Utiq.API.handleDataClear()}catch(n){e.logError("handleDataClear API call failed. Reason: ".concat(n.message))}else e.logError("Unrecognised data response status ".concat(n.status))})).catch((function(n){e.logError("Error occurred on data call: ",n)}))}(t,i))}},ue=function(n,t){var o,r;if(Array.isArray(n)&&(null===(o=null==n?void 0:n[0])||void 0===o?void 0:o.mtid)&&(null===(r=null==n?void 0:n[0])||void 0===r?void 0:r.atid)){var i=n[0],a=i.mtid,c=i.atid;e.logDebug("Dispatching onIdsAvailable event:",JSON.stringify({mtid:a,atid:c})),V({Teavaro:$,Utiq:q}[t].onIdsAvailable.name,t,{mtid:a,atid:c})}},fe=function(n){var t=n.idConnectConfig,o=n.idConnectConfiguration,r=n.idConnectInfoCall,i=n.environment,a=function(e){var n,t=oe(e.IDCONNECT_STORAGE_TYPE).get(e.IDCONNECT_DATA_STORAGE);return null!=t?null===(n=null==t?void 0:t.connectId)||void 0===n?void 0:n.idGraph:null}(o);ue(a,i),e.logDebug("Initializing IDconnect promise handler...");var c=function(e){var n,t,o=null===(t=null===(n=window[e])||void 0===n?void 0:n.config)||void 0===t?void 0:t[{Teavaro:"customTeavaroHost",Utiq:"customUtiqHost"}[e]];return null!=o&&""!==o?o:null}(i);return c&&(o.IDCONNECT_API_HOST="".concat(c,"/op/idconnect")),((n,t)=>{window[n]||={},window[n].API||={},window[n].API.getIdGraphEntry=e=>function(e,n){var t=function(e,n){var t;if(!e)return{isSuccessful:!1,errorMessage:"Entry key (string) parameter is missing"};if(!n||0===Object.keys(n).length)return{isSuccessful:!1,errorMessage:"No FC configuration set up"};var o=oe(n.IDCONNECT_STORAGE_TYPE).get(n.IDCONNECT_DATA_STORAGE);if(!Array.isArray(null===(t=null==o?void 0:o.connectId)||void 0===t?void 0:t.idGraph))return{isSuccessful:!1,errorMessage:"No required IDC data present. Cannot extract the ID graph entry"};var r=o.connectId.idGraph[0];return r&&r[e]?{isSuccessful:!0,data:r[e]}:{isSuccessful:!1,errorMessage:"Could not find an entry for provided entry name: ".concat(e)}}(e,n);return t.isSuccessful?t.data:t.errorMessage}(e,t),e.logDebug("ID Connect API functions initialized...")})(i,o),new Promise((function(n){var c,s,l={protocol:(c=o.IDCONNECT_API_HOST.split("://"))[0]||null,domain:(s=c[1]?c[1].split("/"):null)[0]||null,path:s[1]?s.slice(1).join("/"):null};t.dataCallCounter=0,t.protocol=l.protocol,t.domain=l.domain,t.path=l.path,t.nextBestDomain=o.IDCONNECT_NEXT_BEST_DOMAIN,t.manualRouting=Boolean(o.IDCONNECT_MANUAL_ROUTING);var u=o.IDCONNECT_DATA_STORAGE;e.logDebug("Initializing IDconnect callback success logic..."),e.logDebug("Calling FC callbacks, listeners and data call initialization..."),le({idConnectConfig:t,environment:i,callbackSuccess:function(t){var r,c,s,l,f={connectId:{domain:t.connectId.domain,id:t.connectId.id,idGraph:t.connectId.idGraph||[],value:t.connectId.value,consents:t.connectId.consents||[]},connectStatus:t.connectStatus,ids:t.ids};""!==t.nextBestDomain&&(f.nextBestDomain=t.nextBestDomain),e.logDebug("Updating graph data..."),oe(o.IDCONNECT_STORAGE_TYPE).set(u,f),(null===(r=null==a?void 0:a[0])||void 0===r?void 0:r.mtid)!==(null===(l=null===(s=null===(c=null==t?void 0:t.connectId)||void 0===c?void 0:c.idGraph)||void 0===s?void 0:s[0])||void 0===l?void 0:l.mtid)&&ue(t.connectId.idGraph,i),n(!0)},idConnectConfiguration:o,idConnectInfoCall:r})}))},de={domain:null,path:null,protocol:null,callbackSuccess:null,connectId:null,umdid:null,originalUmdidCookie:null,dataUmdidCookie:null,nextBestDomain:null,manualRouting:!1,token:null,net:null,dataCallCounter:0,version:"1.0.1"},pe=function(e){var n=e.idConnectConfiguration,t=e.idConnectInfoCall,o=e.environment;return fe({idConnectConfig:de,idConnectConfiguration:n,idConnectInfoCall:t,environment:o})},ge=function(e){var n,t,o,r,i=e.idConnectConfiguration,a=e.idConnectInfoCall,c=e.environment;return n=this,t=void 0,r=function(){return function(e,n){var t,o,r,i,a={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return i={next:c(0),throw:c(1),return:c(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function c(c){return function(s){return function(c){if(t)throw new TypeError("Generator is already executing.");for(;i&&(i=0,c[0]&&(a=0)),a;)try{if(t=1,o&&(r=2&c[0]?o.return:c[0]?o.throw||((r=o.return)&&r.call(o),0):o.next)&&!(r=r.call(o,c[1])).done)return r;switch(o=0,r&&(c=[2&c[0],r.value]),c[0]){case 0:case 1:r=c;break;case 4:return a.label++,{value:c[1],done:!1};case 5:a.label++,o=c[1],c=[0];continue;case 7:c=a.ops.pop(),a.trys.pop();continue;default:if(!((r=(r=a.trys).length>0&&r[r.length-1])||6!==c[0]&&2!==c[0])){a=0;continue}if(3===c[0]&&(!r||c[1]>r[0]&&c[1]<r[3])){a.label=c[1];break}if(6===c[0]&&a.label<r[1]){a.label=r[1],r=c;break}if(r&&a.label<r[2]){a.label=r[2],a.ops.push(c);break}r[2]&&a.ops.pop(),a.trys.pop();continue}c=n.call(e,a)}catch(e){c=[6,e],o=0}finally{t=r=0}if(5&c[0])throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}([c,s])}}}(this,(function(e){switch(e.label){case 0:return[4,pe({idConnectConfiguration:i,idConnectInfoCall:a,environment:c})];case 1:return e.sent(),[2]}}))},new((o=void 0)||(o=Promise))((function(e,i){function a(e){try{s(r.next(e))}catch(e){i(e)}}function c(e){try{s(r.throw(e))}catch(e){i(e)}}function s(n){var t;n.done?e(n.value):(t=n.value,t instanceof o?t:new o((function(e){e(t)}))).then(a,c)}s((r=r.apply(n,t||[])).next())}))},he=function(e){var n=e.infoConfigData,t=e.fcConfiguration;return function(e){return W({infoConfigData:n,fcConfiguration:t,umdidCookieValue:e})}},ve=function(e,n,t){return o=this,r=void 0,a=function(){var o,r,i,a,c,s,u,f;return function(e,n){var t,o,r,i,a={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return i={next:c(0),throw:c(1),return:c(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function c(c){return function(s){return function(c){if(t)throw new TypeError("Generator is already executing.");for(;i&&(i=0,c[0]&&(a=0)),a;)try{if(t=1,o&&(r=2&c[0]?o.return:c[0]?o.throw||((r=o.return)&&r.call(o),0):o.next)&&!(r=r.call(o,c[1])).done)return r;switch(o=0,r&&(c=[2&c[0],r.value]),c[0]){case 0:case 1:r=c;break;case 4:return a.label++,{value:c[1],done:!1};case 5:a.label++,o=c[1],c=[0];continue;case 7:c=a.ops.pop(),a.trys.pop();continue;default:if(!((r=(r=a.trys).length>0&&r[r.length-1])||6!==c[0]&&2!==c[0])){a=0;continue}if(3===c[0]&&(!r||c[1]>r[0]&&c[1]<r[3])){a.label=c[1];break}if(6===c[0]&&a.label<r[1]){a.label=r[1],r=c;break}if(r&&a.label<r[2]){a.label=r[2],a.ops.push(c);break}r[2]&&a.ops.pop(),a.trys.pop();continue}c=n.call(e,a)}catch(e){c=[6,e],o=0}finally{t=r=0}if(5&c[0])throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}([c,s])}}}(this,(function(d){switch(d.label){case 0:return o=e.callsToMake,r=o.info,i=o.idConnect,a=o.clickserve,c=o.floodlight,s=o.facebook,u=o.track,f=o.idsync,r?[4,W({infoConfigData:r,fcConfiguration:t})]:[3,2];case 1:d.sent(),d.label=2;case 2:return i&&ge({idConnectConfiguration:t,idConnectInfoCall:he({infoConfigData:r,fcConfiguration:t}),environment:l.Teavaro}),R(a,n),P(c,t),_(s,t),O(u,t),v(f,t),[2]}}))},new((i=void 0)||(i=Promise))((function(e,n){function t(e){try{s(a.next(e))}catch(e){n(e)}}function c(e){try{s(a.throw(e))}catch(e){n(e)}}function s(n){var o;n.done?e(n.value):(o=n.value,o instanceof i?o:new i((function(e){e(o)}))).then(t,c)}s((a=a.apply(o,r||[])).next())}));var o,r,i,a},me=function(e,n){return t=void 0,r=void 0,a=function(){var t,r,i,a;return function(e,n){var t,o,r,i,a={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return i={next:c(0),throw:c(1),return:c(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function c(c){return function(s){return function(c){if(t)throw new TypeError("Generator is already executing.");for(;i&&(i=0,c[0]&&(a=0)),a;)try{if(t=1,o&&(r=2&c[0]?o.return:c[0]?o.throw||((r=o.return)&&r.call(o),0):o.next)&&!(r=r.call(o,c[1])).done)return r;switch(o=0,r&&(c=[2&c[0],r.value]),c[0]){case 0:case 1:r=c;break;case 4:return a.label++,{value:c[1],done:!1};case 5:a.label++,o=c[1],c=[0];continue;case 7:c=a.ops.pop(),a.trys.pop();continue;default:if(!((r=(r=a.trys).length>0&&r[r.length-1])||6!==c[0]&&2!==c[0])){a=0;continue}if(3===c[0]&&(!r||c[1]>r[0]&&c[1]<r[3])){a.label=c[1];break}if(6===c[0]&&a.label<r[1]){a.label=r[1],r=c;break}if(r&&a.label<r[2]){a.label=r[2],a.ops.push(c);break}r[2]&&a.ops.pop(),a.trys.pop();continue}c=n.call(e,a)}catch(e){c=[6,e],o=0}finally{t=r=0}if(5&c[0])throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}([c,s])}}}(this,(function(c){switch(c.label){case 0:t=n.API_HOST,r=n.API_SUBSCRIBE_URL,i="".concat(t).concat(r),a=function(e){return Object.keys(e).map((function(n){return"".concat(n,"=").concat(e[n])})).join("&")}(e),c.label=1;case 1:return c.trys.push([1,3,,4]),[4,o()({method:"get",url:"".concat(i,"?").concat(a),withCredentials:!0,timeout:4e3})];case 2:return[2,{data:c.sent().data,error:null}];case 3:return[2,{data:null,error:c.sent().message}];case 4:return[2]}}))},new((i=void 0)||(i=Promise))((function(e,n){function o(e){try{s(a.next(e))}catch(e){n(e)}}function c(e){try{s(a.throw(e))}catch(e){n(e)}}function s(n){var t;n.done?e(n.value):(t=n.value,t instanceof i?t:new i((function(e){e(t)}))).then(o,c)}s((a=a.apply(t,r||[])).next())}));var t,r,i,a},be=function(n,t){return o=this,r=void 0,a=function(){var o,r,i;return function(e,n){var t,o,r,i,a={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return i={next:c(0),throw:c(1),return:c(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function c(c){return function(s){return function(c){if(t)throw new TypeError("Generator is already executing.");for(;i&&(i=0,c[0]&&(a=0)),a;)try{if(t=1,o&&(r=2&c[0]?o.return:c[0]?o.throw||((r=o.return)&&r.call(o),0):o.next)&&!(r=r.call(o,c[1])).done)return r;switch(o=0,r&&(c=[2&c[0],r.value]),c[0]){case 0:case 1:r=c;break;case 4:return a.label++,{value:c[1],done:!1};case 5:a.label++,o=c[1],c=[0];continue;case 7:c=a.ops.pop(),a.trys.pop();continue;default:if(!((r=(r=a.trys).length>0&&r[r.length-1])||6!==c[0]&&2!==c[0])){a=0;continue}if(3===c[0]&&(!r||c[1]>r[0]&&c[1]<r[3])){a.label=c[1];break}if(6===c[0]&&a.label<r[1]){a.label=r[1],r=c;break}if(r&&a.label<r[2]){a.label=r[2],a.ops.push(c);break}r[2]&&a.ops.pop(),a.trys.pop();continue}c=n.call(e,a)}catch(e){c=[6,e],o=0}finally{t=r=0}if(5&c[0])throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}([c,s])}}}(this,(function(a){switch(a.label){case 0:return o=null==n?void 0:n.subscriberId,r=null==n?void 0:n.subscriberKey,o&&r?[4,me((i={},i[r]=o,i),t)]:[3,2];case 1:return a.sent(),[3,3];case 2:e.logDebug("Local storage customerId for subscribe call is not defined. Subscribe call was not made."),a.label=3;case 3:return[2]}}))},new((i=void 0)||(i=Promise))((function(e,n){function t(e){try{s(a.next(e))}catch(e){n(e)}}function c(e){try{s(a.throw(e))}catch(e){n(e)}}function s(n){var o;n.done?e(n.value):(o=n.value,o instanceof i?o:new i((function(e){e(o)}))).then(t,c)}s((a=a.apply(o,r||[])).next())}));var o,r,i,a},ye=new Uint8Array(16);function we(){if(!Q&&!(Q="undefined"!=typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||"undefined"!=typeof msCrypto&&"function"==typeof msCrypto.getRandomValues&&msCrypto.getRandomValues.bind(msCrypto)))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return Q(ye)}const Ce=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i;for(var Ee=[],Te=0;Te<256;++Te)Ee.push((Te+256).toString(16).substr(1));const Se=function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,t=(Ee[e[n+0]]+Ee[e[n+1]]+Ee[e[n+2]]+Ee[e[n+3]]+"-"+Ee[e[n+4]]+Ee[e[n+5]]+"-"+Ee[e[n+6]]+Ee[e[n+7]]+"-"+Ee[e[n+8]]+Ee[e[n+9]]+"-"+Ee[e[n+10]]+Ee[e[n+11]]+Ee[e[n+12]]+Ee[e[n+13]]+Ee[e[n+14]]+Ee[e[n+15]]).toLowerCase();if(!function(e){return"string"==typeof e&&Ce.test(e)}(t))throw TypeError("Stringified UUID is invalid");return t},Ie=function(e,n,t){var o=(e=e||{}).random||(e.rng||we)();if(o[6]=15&o[6]|64,o[8]=63&o[8]|128,n){t=t||0;for(var r=0;r<16;++r)n[t+r]=o[r];return n}return Se(o)};var De={ident:g,subscribe:be,track:O,idsync:v,facebook:_,floodlight:P,clickserve:R},Oe=function(n){return t=this,o=void 0,i=function(){var t,o,r,i,a,c,s,u,f,d,p,g,h,v,m,b,y,w;return function(e,n){var t,o,r,i,a={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return i={next:c(0),throw:c(1),return:c(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function c(c){return function(s){return function(c){if(t)throw new TypeError("Generator is already executing.");for(;i&&(i=0,c[0]&&(a=0)),a;)try{if(t=1,o&&(r=2&c[0]?o.return:c[0]?o.throw||((r=o.return)&&r.call(o),0):o.next)&&!(r=r.call(o,c[1])).done)return r;switch(o=0,r&&(c=[2&c[0],r.value]),c[0]){case 0:case 1:r=c;break;case 4:return a.label++,{value:c[1],done:!1};case 5:a.label++,o=c[1],c=[0];continue;case 7:c=a.ops.pop(),a.trys.pop();continue;default:if(!((r=(r=a.trys).length>0&&r[r.length-1])||6!==c[0]&&2!==c[0])){a=0;continue}if(3===c[0]&&(!r||c[1]>r[0]&&c[1]<r[3])){a.label=c[1];break}if(6===c[0]&&a.label<r[1]){a.label=r[1],r=c;break}if(r&&a.label<r[2]){a.label=r[2],a.ops.push(c);break}r[2]&&a.ops.pop(),a.trys.pop();continue}c=n.call(e,a)}catch(e){c=[6,e],o=0}finally{t=r=0}if(5&c[0])throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}([c,s])}}}(this,(function(C){switch(C.label){case 0:return(n=>{window[n]||={};let t=window[n]?.transactionId;const o=Object.values(l),r=o.includes((e=>e===n));t||o.forEach((e=>{window[e]?.transactionId&&(t=window[e].transactionId)})),t||(e.logDebug("No transaction ID present. Creating"),t=Ie(),e.logDebug(`New transactionId: ${t}`)),r?o.forEach((e=>{e&&(window[e]||={},window[e].transactionId=t)})):window[n].transactionId=t})(l.Teavaro),t=n.CALLS_CONFIG,o=n.CONSTANTS,r=n.FC_CONF,i=function(n){var t=n.timeConditions,o=n.oncePerPage,r=t.oncePerSession&&o;return r&&e.logError("oncePerSession and oncePerPage must not be enabled at same time. Terminating the calls flow..."),!r}(t.conditions),a=function(n){var t=n.urls;if(!t||!t.length)return!0;e.logDebug("Found urls validation set to true. Validating urls...");var o=t.some((function(e){return e===window.location.pathname}));return e.logDebug("Valid url ".concat(o?"found":"not found")),o}(t.conditions),E=t.conditions,T=o.SESSION_CALL_NAME,c=!E.timeConditions.oncePerSession||(e.logDebug("Found oncePerSession set to true. Checking once-per-session calls session storage entry..."),sessionStorage.getItem(T)?(e.logDebug("Session storage entry found. Once-per-session calls were already made."),!1):(e.logDebug("Session storage entry found. Invoking calls and setting session data..."),sessionStorage.setItem(T,JSON.stringify(!0)),!0)),s=function(n,t){var o=n.timeConditions,r=o.oncePerTimeInterval,i=o.oncePerSession,a=n.oncePerPage,c=Date.now();if(!r)return!0;e.logDebug("Found oncePerTimeInterval set to true. Checking interval storage entry...");var s=JSON.parse(localStorage.getItem(t));if(!s){e.logDebug("Interval data not found in the local storage. Invoking calls and initializing new time interval entry...");var l=new Date(c+r).getTime();return localStorage.setItem(t,JSON.stringify(l)),!0}return s<c?(e.logDebug("Time interval passed. Invoking calls and settting new time interval..."),l=new Date(c+r).getTime(),localStorage.setItem(t,JSON.stringify(l)),!0):!(!i||!r||a)||(e.logDebug("Interval local storage timestamp found. Calls already made. Proceeding..."),!1)}(t.conditions,o.LOCAL_TIME_INTERVAL),u=i&&a&&c&&s,e.logDebug("shouldInvokeCallsPerTimeConditions: ".concat(i)),e.logDebug("areUrlsValidated: ".concat(a)),e.logDebug("shouldInvokeCallsOncePerSession: ".concat(c)),e.logDebug("shouldInvokeCallsPerTimeInterval: ".concat(s)),e.logDebug("shouldInvokeCalls: ".concat(u)),u?[4,ve(t,o.CLICKSERVE_URL,r)]:[3,2];case 1:return C.sent(),[3,8];case 2:return f=t.conditions.oncePerPage,d=i&&a,e.logDebug("Once-per-page calls condition: ".concat(f)),f||!d?[3,7]:(e.logDebug("Initializing calls with per-page setup..."),p=t.callsPerPage,(h=(g=p).info)?(e.logDebug("Found per-page info call config entry"),[4,W({infoConfigData:h,fcConfiguration:r})]):[3,4]);case 3:C.sent(),delete g.info,C.label=4;case 4:return g.idConnect?(e.logDebug("Found per-page idConnect call config entry"),[4,ge({idConnectConfiguration:r,idConnectInfoCall:he({infoConfigData:h,fcConfiguration:r}),environment:l.Teavaro})]):[3,6];case 5:C.sent(),delete g.idConnect,C.label=6;case 6:for(v=0,m=Object.entries(g);v<m.length;v++)b=m[v],y=b[0],b[1]&&De[y]&&"function"==typeof De[y]&&(w=De[y],e.logDebug("Found per page ".concat(y," call")),w(t[y],o,r));return e.logDebug("Finished calls-per-page invocation..."),[3,8];case 7:e.logDebug("Calls-per-page dismissed due to configuration and conditions"),C.label=8;case 8:return[2]}var E,T}))},new((r=void 0)||(r=Promise))((function(e,n){function a(e){try{s(i.next(e))}catch(e){n(e)}}function c(e){try{s(i.throw(e))}catch(e){n(e)}}function s(n){var t;n.done?e(n.value):(t=n.value,t instanceof r?t:new r((function(e){e(t)}))).then(a,c)}s((i=i.apply(t,o||[])).next())}));var t,o,r,i},Ae=function(e,n,t,o){return new(t||(t=Promise))((function(r,i){function a(e){try{s(o.next(e))}catch(e){i(e)}}function c(e){try{s(o.throw(e))}catch(e){i(e)}}function s(e){var n;e.done?r(e.value):(n=e.value,n instanceof t?n:new t((function(e){e(n)}))).then(a,c)}s((o=o.apply(e,n||[])).next())}))},ke=function(e,n){var t,o,r,i,a={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return i={next:c(0),throw:c(1),return:c(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function c(c){return function(s){return function(c){if(t)throw new TypeError("Generator is already executing.");for(;i&&(i=0,c[0]&&(a=0)),a;)try{if(t=1,o&&(r=2&c[0]?o.return:c[0]?o.throw||((r=o.return)&&r.call(o),0):o.next)&&!(r=r.call(o,c[1])).done)return r;switch(o=0,r&&(c=[2&c[0],r.value]),c[0]){case 0:case 1:r=c;break;case 4:return a.label++,{value:c[1],done:!1};case 5:a.label++,o=c[1],c=[0];continue;case 7:c=a.ops.pop(),a.trys.pop();continue;default:if(!((r=(r=a.trys).length>0&&r[r.length-1])||6!==c[0]&&2!==c[0])){a=0;continue}if(3===c[0]&&(!r||c[1]>r[0]&&c[1]<r[3])){a.label=c[1];break}if(6===c[0]&&a.label<r[1]){a.label=r[1],r=c;break}if(r&&a.label<r[2]){a.label=r[2],a.ops.push(c);break}r[2]&&a.ops.pop(),a.trys.pop();continue}c=n.call(e,a)}catch(e){c=[6,e],o=0}finally{t=r=0}if(5&c[0])throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}([c,s])}}},xe=function(n){return Ae(this,void 0,void 0,(function(){var t,o,r,i,a=this;return ke(this,(function(c){switch(c.label){case 0:return e.logDebug("Initializing FC library calls..."),[4,Oe(n)];case 1:return c.sent(),t=n.CALLS_CONFIG,o=n.FC_CONF,[4,g(t.callsToMake.ident,o)];case 2:return c.sent(),[4,be(t.callsToMake.subscribe,o)];case 3:return c.sent(),r=window.history.pushState,i=t.conditions.oncePerPage,window.history.pushState=function(){for(var c=[],s=0;s<arguments.length;s++)c[s]=arguments[s];return Ae(a,void 0,void 0,(function(){return ke(this,(function(a){switch(a.label){case 0:return r.apply(window.history,c),i?(e.logInfo("Initializing FC library's oncePerPage calls"),[4,Oe(n)]):[3,2];case 1:a.sent(),a.label=2;case 2:return[4,g(t.callsToMake.ident,o)];case 3:return a.sent(),[4,be(t.callsToMake.subscribe,o)];case 4:return a.sent(),[2]}}))}))},[2]}}))}))};(async()=>{const n=l.Teavaro;e.initialize(n,a(document.cookie,s(n.toLowerCase()))),e.logDebug("Setting Axios calls interceptors..."),o().interceptors.request.use((n=>(e.logTrace(`Calling url ${n.url} with data:`,n.data),n)),(n=>(e.logError("Error occurred when setting up a request:",n.message),Promise.reject(n)))),o().interceptors.response.use((n=>(e.logTrace(`Response from ${n.config.url} with data:`,n.data,"and status",n.status),n)),(n=>(n.response?e.logTrace("Call for",n.response.config.url,"failed with response status",n.response.status,"and reason:",n.response.data):n.request?e.logError("No response received for a call: ",n.request):e.logError("General error occurred: ",n.message),Promise.reject(n)))),e.logDebug("Finished setting Axios calls interceptors."),(n=>{const t=s(n.toLowerCase());window[n]||={},window[n].API||={},window[n].API.setVerboseLoggingLevel=()=>{const n=a(document.cookie,t);!!n&&"verbose"===n||(document.cookie=i({name:t,value:c("verbose"),days:90})),e.logInfo("Verbose logging level has been set"),e.setLogLevel(e.logLevels.verbose)},window[n].API.resetLoggingLevel=()=>{const n=a(document.cookie,t);!!n&&"verbose"===n&&(document.cookie=i({name:t,value:c("info"),days:0})),e.setLogLevel(e.logLevels.info),e.logInfo("Logging level has been reset to info level")},e.logDebug(`${n} logging API functions initialized...`)})(n);const t=await u(window.location.host,n);var r,d;n===l.Teavaro&&(r=t.FC_CONF,window.Teavaro||(window.Teavaro={}),(d=window.Teavaro).API||(d.API={}),window.Teavaro.API.getFcDataEntry=function(n){return function(n,t,o){if(void 0===o&&(o=["umid","permissions","permissionsLastModification","notificationHistory","notificationStatus","attributes"]),!o.includes(n))return e.logError('Provided key "'.concat(n,'" is not a valid entry. Allowed options are: ').concat(o.join(", "),".")),null;if(!t||0===Object.keys(t).length)return e.logError("No client FunnelConnect configuration set up, you need to initalize FunnelConnect JavaScript library to enable it."),null;var r=JSON.parse(("sessionStorage"===(null==t?void 0:t.IDCONNECT_STORAGE_TYPE)?window.sessionStorage:window.localStorage).getItem(t.SESSION_STORAGE));return null!==r&&void 0!==(null==r?void 0:r[n])?r[n]:(e.logError("FunnelConnect session storage data is not set properly. Make sure that FunnelConnect JavaScript library finished loading."),null)}(n,r)},e.logDebug("FunnelConnect API functions initialized..."));const p=function(e,n,t){n=f(f(f({},{CLIENT_HASH_ID_NAME:"customer_id",TESTING_ITEM_NAME:"FC_TESTING_MODE",SESSION_CALL_NAME:"FC_SESSION_CALL",LOCAL_TIME_INTERVAL:"FC_LOCAL_TIME_INTERVAL",TEST_URL_PARAM:""}),n),t);var o=new URLSearchParams(window.location.search);return"true"===o.get("debug_mode")&&null===sessionStorage.getItem("SET_DB_MODE")?sessionStorage.setItem("SET_DB_MODE",JSON.stringify(!0)):"false"===o.get("debug_mode")&&null!==sessionStorage.getItem("SET_DB_MODE")&&sessionStorage.removeItem("SET_DB_MODE"),{CALLS_CONFIG:e,CONSTANTS:n,FC_CONF:t}}(t.CALLS_CONFIG,t.CONSTANTS,t.FC_CONF);"complete"===window.document.readyState?xe(p):window.addEventListener?window.addEventListener("load",(()=>xe(p))):window.attachEvent("onload",(()=>xe(p)))})()})()})();